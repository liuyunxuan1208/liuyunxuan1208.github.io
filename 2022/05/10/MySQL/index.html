<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>MySQL | 尘埃落定博客</title><meta name="author" content="liuyunxuan"><meta name="copyright" content="liuyunxuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="MySQL1.初识MySQLJavaEE：企业级Java开发、Web  前端（页面：展示——数据）； 后端（连接点：连接数据库JDBC，连接前端——控制视图跳转和给前端传递数据）； 数据库（存数据，Txt，Excel，world）。   程序员等级：  只会写代码，没学好数据库，基本混饭吃。 操作系统，数据结构预算法！当一个不错的程序员！ 离散数学、数字电路、体系结构、编译原理。+实战经验&amp;#x3"><meta property="og:type" content="article"><meta property="og:title" content="MySQL"><meta property="og:url" content="https://liu-yunxuan.github.io/2022/05/10/MySQL/index.html"><meta property="og:site_name" content="尘埃落定博客"><meta property="og:description" content="MySQL1.初识MySQLJavaEE：企业级Java开发、Web  前端（页面：展示——数据）； 后端（连接点：连接数据库JDBC，连接前端——控制视图跳转和给前端传递数据）； 数据库（存数据，Txt，Excel，world）。   程序员等级：  只会写代码，没学好数据库，基本混饭吃。 操作系统，数据结构预算法！当一个不错的程序员！ 离散数学、数字电路、体系结构、编译原理。+实战经验&amp;#x3"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://liu-yunxuan.github.io/cover/mysql.png"><meta property="article:published_time" content="2022-05-10T02:00:00.000Z"><meta property="article:modified_time" content="2024-09-22T13:00:01.235Z"><meta property="article:author" content="liuyunxuan"><meta property="article:tag" content="Java"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://liu-yunxuan.github.io/cover/mysql.png"><link rel="shortcut icon" href="/images/sheep.png"><link rel="canonical" href="https://liu-yunxuan.github.io/2022/05/10/MySQL/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!0,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:230},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!1,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"MySQL",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-09-22 21:00:01"}</script><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const a={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(a))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},Object.keys(t).forEach((e=>{n.setAttribute(e,t[e])})),document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},document.head.appendChild(n)})),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/lyx.css"><script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{const d=document.getElementById("loading-box"),e=document.body,o=()=>{e.style.overflow="",d.classList.add("loaded")},l=()=>{e.style.overflow="hidden",d.classList.remove("loaded")};l(),window.addEventListener("load",(()=>{o()}))})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('/../cover/mysql.png')"><nav id="nav"><span id="blog-info"><a href="/" title="尘埃落定博客"><img class="site-icon" src="/images/sheep.png"><span class="site-name">尘埃落定博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-22T13:00:01.235Z" title="更新于 2024-09-22 21:00:01">2024-09-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">26k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>112分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="MySQL"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="1-初识MySQL"><a href="#1-初识MySQL" class="headerlink" title="1.初识MySQL"></a>1.初识MySQL</h2><p>JavaEE：企业级Java开发、Web</p><ul><li>前端（页面：展示——数据）；</li><li>后端（连接点：连接数据库JDBC，连接前端——控制视图跳转和给前端传递数据）；</li><li>数据库（存数据，Txt，Excel，world）。</li></ul><blockquote><p>程序员等级：</p><ul><li>只会写代码，没学好数据库，基本混饭吃。</li><li>操作系统，数据结构预算法！当一个不错的程序员！</li><li>离散数学、数字电路、体系结构、编译原理。+实战经验&#x3D;高级程序&#x2F;优秀的程序员。</li></ul></blockquote><h3 id="1-为什么要学习MySQL"><a href="#1-为什么要学习MySQL" class="headerlink" title="1.为什么要学习MySQL"></a>1.为什么要学习MySQL</h3><ol><li>岗位需求；</li><li>现在的世界，大数据时代，得数据库者得天下。</li><li>被迫需求：存数据；</li><li>数据库是所有软件体系中最核心的存在 <code>DBA</code>。</li></ol><h3 id="2-什么是数据库"><a href="#2-什么是数据库" class="headerlink" title="2.什么是数据库"></a>2.什么是数据库</h3><ol><li>数据库（DB 、DataBase）</li><li>概念：数据仓库，<strong>软件</strong>，安装在操作系统（windows，linux，mac，…）之上！SQL，可以存储大量的数据。500万！</li><li>作用：存储数据、管理数据。</li></ol><h3 id="3-数据库分类"><a href="#3-数据库分类" class="headerlink" title="3.数据库分类"></a>3.数据库分类</h3><p><strong>关系型数据库：</strong>（SQL）</p><ul><li>MySQL，Oracle、Sql server ， DB2，SQLlite</li><li>通过表和表之间，行和列之间的关系进行数据的存储，学员信息表，考勤表…</li></ul><p><strong>非关系型数据库</strong>（NoSQL）not only</p><ul><li>Redis、MongDB</li><li>非关系型数据库，对象存储，通过对象的自身属性来决定。</li></ul><p><strong>DBMS（数据库管理系统）</strong></p><ul><li>数据库管理系统 ( <strong>D</strong>ata<strong>B</strong>ase <strong>M</strong>anagement <strong>S</strong>ystem )</li><li>数据库管理软件 , 科学组织和存储数据 , 高效地获取和维护数据</li></ul><p><img src="/../img/MySQL/01.png" alt="../img"></p><p>为什么要说这个呢?</p><ul><li>因为我们要学习的MySQL应该算是一个数据库管理系统.</li></ul><h3 id="4-MySQL简介与安装"><a href="#4-MySQL简介与安装" class="headerlink" title="4.MySQL简介与安装"></a>4.MySQL简介与安装</h3><p><img src="/../img/MySQL/image-20210711101423094.png" alt="image-20210711101423094"></p><p><strong>概念</strong> : 是现在<strong>流行</strong>的<strong>开源</strong>的,<strong>免费</strong>的 <strong>关系型</strong>数据库；<br><strong>历史</strong> : 由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。<br><strong>特点</strong> :</p><ul><li>免费 , 开源数据库；</li><li>小巧 , 功能齐全；</li><li>使用便捷；</li><li>可运行于Windows或Linux操作系统；</li><li>适用于中小型甚至大型网站应用。</li></ul><blockquote><p>安装<a target="_blank" rel="noopener" href="https://www.mysql.com/">MySQL</a></p><ul><li><strong>建议使用压缩版,安装快,方便.不复杂。</strong><code>不建议使用exe文件，不易卸载干净</code>！！</li></ul></blockquote><ul><li><p><strong>软件下载</strong>，mysql5.7 64位下载地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.19-winx64.zip">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.19-winx64.zip</a></p></li><li><p>电脑是64位的就下载使用64位版本的！</p></li></ul><blockquote><p>安装步骤</p></blockquote><ol><li><p>下载后得到zip压缩包。</p></li><li><p>解压到自己想要安装到的目录，本人解压到的是”F:\java\MySQL”</p></li><li><p>添加环境变量：</p><ol><li>此电脑-&gt;属性-&gt;高级-&gt;环境变量；</li><li>选择PATH,在其后面添加: 你的mysql 安装文件下面的bin文件夹；</li><li>在F:\java\MySQL目录下新建my.ini文件；</li><li>编辑 my.ini 文件 ,注意替换路径位置；</li></ol></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">basedir=F:\java\MySQL</span><br><span class="line">datadir=F:\java\MySQL\data\</span><br><span class="line">port=3306</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure><ol start="5"><li>启动管理员模式下的CMD，并将路径切换至mysql下的bin目录，然后输入<code>mysqld –install</code> (安装mysql)；</li><li>再输入 <code>mysqld --initialize-insecure --user=mysql</code> 初始化数据文件；</li><li>然后输入命令<code>net start mysql</code>再次启动mysql 然后用命令 mysql –u root –p 进入mysql管理界面（密码可为空）；</li></ol><p><img src="/../img/MySQL/image-20210711154455946.png" alt="image-20210711154455946"></p><ol start="8"><li>进入界面后更改root密码；</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update mysql.user set authentication_string=password(&#x27;root&#x27;) where user=&#x27;root&#x27; </span><br><span class="line">and Host = &#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure><ol start="9"><li>刷新权限；</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><ol start="10"><li>修改 my.ini文件，删除最后一句 <code>skip-grant-tables</code>；</li></ol><p><img src="/../img/MySQL/image-20210711154659546.png" alt="image-20210711154659546"></p><ol start="11"><li>重启mysql即可正常使用（先使用exit，退出mysql）；</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net stop MySQL</span><br><span class="line">net start MySQL</span><br></pre></td></tr></table></figure><ol start="12"><li>连接上测试，出现以下结果就安装好了。</li></ol><p><img src="/../img/MySQL/image-20210711154803360.png" alt="image-20210711154803360"></p><blockquote><p>注：出现<code>ERROR 29 (HY000): File &#39;./mysql/user.MYD&#39; not found (Errcode: 2 - No such file or directory)</code>问题。</p><ul><li>&#x3D;&#x3D;MySQL文件在C盘未卸载干净。需检查C盘，删除MySQL相关文件夹&#x3D;&#x3D;。</li></ul></blockquote><hr><h3 id="5-SQLyog安装"><a href="#5-SQLyog安装" class="headerlink" title="5.SQLyog安装"></a>5.SQLyog安装</h3><ul><li><p>可手动操作,管理MySQL数据库的软件工具。</p></li><li><p>特点 : 简洁 , 易用 , 图形化。</p></li><li><p>下载地址：<a target="_blank" rel="noopener" href="https://sqlyog.en.softonic.com/">地址①</a>；<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1ddHZ5MmQ_FF2qug6Ks1MUQ">地址②</a>（提取码: 8fqx）；</p></li><li><p>无脑安装，直接下一步；注册软件；连接数据库，运行如下图：</p></li></ul><p><img src="/../img/MySQL/image-20210711163910418.png" alt="image-20210711163910418"></p><ul><li>创建一个数据库；<code>现在推荐字符集使用：utf8mb4，排序规则使用utf8mb4_bin</code>。</li></ul><p><img src="/../img/MySQL/image-20210711164603411.png" alt="image-20210711164603411"></p><blockquote><p>每一个 sqlyog的执行操作，本质就是对应了一个sql，可以在软件的历史记录中查看。</p></blockquote><ul><li>新建一张表</li></ul><p><img src="/../img/MySQL/image-20210711165720583.png" alt="image-20210711165720583"></p><ul><li>查看表</li></ul><p><img src="/../img/MySQL/image-20210711165949513.png" alt="image-20210711165949513"></p><ul><li>插入数据</li></ul><p><img src="/../img/MySQL/image-20210711170104188.png" alt="image-20210711170104188"></p><h3 id="6-连接数据库"><a href="#6-连接数据库" class="headerlink" title="6.连接数据库"></a>6.连接数据库</h3><p>打开MySQL命令窗口</p><ul><li>在DOS命令行窗口进入 <strong>安装目录\mysql\bin</strong></li><li>如果之前设置了环境变量，可以在任意目录打开！</li></ul><p><strong>连接数据库语句 :</strong> <code>mysql -h 服务器主机地址 -u 用户名 -p 用户密码</code></p><p><img src="/../img/MySQL/image-20210711171208112.png" alt="image-20210711171208112"></p><blockquote><p>注意 : -p后面不能加空格,否则会被当做密码的内容,导致登录失败 !</p><p>注：用键盘上的“向上的箭头”按一下，就可以直接复制上一行的dos命令。</p></blockquote><ul><li>基本的数据库操作命令：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot -- 连接数据库</span><br><span class="line">update user set password=password(&#x27;123456&#x27;)where user=&#x27;root&#x27;;  -- 修改密码</span><br><span class="line">flush privileges;  -- 刷新权限</span><br><span class="line">show databases; -- 显示所有数据库</span><br><span class="line">use school; -- 选择school数据库</span><br><span class="line">show tables; -- 显示数据库中所有的表</span><br><span class="line">describe student; -- 显示表mysql数据库中student表的列信息</span><br><span class="line">create database book; -- 创建数据库book</span><br><span class="line">use book; -- 选择book数据库</span><br><span class="line"></span><br><span class="line">exit; -- 退出Mysql</span><br><span class="line">? 命令关键词 : 寻求帮助</span><br><span class="line">-- 表示单行注释</span><br><span class="line">/*</span><br><span class="line">SQL的多行注释</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="2-数据库操作"><a href="#2-数据库操作" class="headerlink" title="2.数据库操作"></a>2.数据库操作</h2><blockquote><p>结构化查询语句分类</p></blockquote><table><thead><tr><th align="center">名称</th><th>解释</th><th>命令</th></tr></thead><tbody><tr><td align="center">数据定义语言(DDL)</td><td>定义和管理数据对象，如数据库、数据表等</td><td>CRATE、DROP、ALTER</td></tr><tr><td align="center">数据操作语言(DML)</td><td>用于操作数据库对象中所包含的数据</td><td>INSERT、VPDATE、DELETE</td></tr><tr><td align="center">数据查询语言(DQL)</td><td>用于查询数据库数据</td><td>SELECT</td></tr><tr><td align="center">数据控制语言(DCL)</td><td>用于管理数据的语言，包括权限及数据更改</td><td>GRANT、COMMIT、ROLLBACK</td></tr></tbody></table><h3 id="1-操作数据库"><a href="#1-操作数据库" class="headerlink" title="1.操作数据库"></a>1.操作数据库</h3><blockquote><p>命令行操作数据库</p></blockquote><ul><li>创建数据库 : <code>create database [if not exists] 数据库名;</code></li><li>删除数据库 : <code>drop database [if exists] 数据库名;</code></li><li>查看数据库 : <code>show databases;</code></li><li>使用数据库 : <code>use 数据库名;</code></li></ul><p>&#x3D;&#x3D;看到这种语句中有中括号的，都是可写可不写的。&#x3D;&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE westos;</span><br><span class="line"></span><br><span class="line">DROP DATABASE westos;</span><br><span class="line"></span><br><span class="line">SHOW DATABASES;</span><br><span class="line">-- tab键上面，如果你的表名或字段名是一个特殊字符，就需要带 ``</span><br><span class="line">USE book;</span><br></pre></td></tr></table></figure><h3 id="2-数据值和列类型"><a href="#2-数据值和列类型" class="headerlink" title="2.数据值和列类型"></a>2.数据值和列类型</h3><blockquote><p>参考于：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dce439b03e7b">简书</a></p></blockquote><ul><li>列类型： 规定数据库中该列存放的数据类型。</li></ul><blockquote><p>数值类型</p></blockquote><p><img src="/../img/MySQL/2061.png" alt="../img"></p><ul><li>最后一个：decimal（13,2）代表这个数字有13位，小数点后面有2位。</li></ul><blockquote><p>字符串类型</p></blockquote><p><img src="/../img/MySQL/image-20210711174633180.png" alt="image-20210711174633180"></p><ul><li>前两个的区别在于：一个定长，一个可变长。</li></ul><blockquote><p>日期和时间型数值类型</p></blockquote><p><img src="/../img/MySQL/image-20210711174734533.png" alt="image-20210711174734533"></p><blockquote><p>NULL值</p></blockquote><ul><li>理解为 “没有值” 或 “未知值”；</li><li>不要用NULL进行算术运算 , 结果仍为NULL；</li></ul><blockquote><p>如何选择合适的数据类型</p></blockquote><ol><li>整数和浮点：如果你存的这一列没有小数，就选整数类型（货币选decimal）。</li><li>日期类型：一般选DATETIME类型；以后可能会用到TIMESTAMP类型。但是后面这个的存储范围是小于前面这个的。</li><li>char和varchar：char是固定长度的，varchar是可变长度的。如果存储的东西对速度要求很高而对空间要求比较小，就用char；反之则用varchar。</li></ol><h3 id="3-数据字段属性"><a href="#3-数据字段属性" class="headerlink" title="3.数据字段属性"></a>3.数据字段属性</h3><blockquote><p><strong>UnSigned</strong></p></blockquote><ul><li>无符号的。</li><li>声明该数据列不允许负数。</li></ul><blockquote><p><strong>ZEROFILL</strong></p></blockquote><ul><li>0填充的；</li><li>不足位数的用0来填充 , 如int(3),5则为005；</li></ul><blockquote><p><strong>Auto_InCrement</strong></p></blockquote><ul><li><p>自动增长的 , 每添加一条数据 , 自动在上一个记录数上加 1(默认)；</p></li><li><p>通常用于设置<strong>主键</strong> , 且为整数类型；</p></li><li><p>可定义起始值和步长；</p></li><li><ul><li>当前表设置步长(AUTO_INCREMENT&#x3D;100) : 只影响当前表；</li><li>SET @@auto_increment_increment&#x3D;5 ; 影响所有使用自增的表(全局)；</li></ul></li></ul><p><img src="/../img/MySQL/image-20210712084433295.png" alt="image-20210712084433295"></p><blockquote><p><strong>NULL 和 NOT NULL</strong></p></blockquote><ul><li>默认为NULL , 即没有插入该列的数值；</li><li>如果设置为NOT NULL , 则该列必须有值；</li></ul><blockquote><p><strong>DEFAULT</strong></p></blockquote><ul><li>默认的；</li><li>用于设置默认值；</li></ul><blockquote><p><code>每一个表 ，都必须存在以下五个字段</code>：</p></blockquote><ul><li>id 主键；</li><li>vorsion 乐观锁；</li><li>is_delete 伪删除；</li><li>gmt_create 创建时间；</li><li>gmt_update 修改时间；</li></ul><h3 id="4-创建数据表"><a href="#4-创建数据表" class="headerlink" title="4.创建数据表"></a>4.创建数据表</h3><ul><li>属于DDL的一种，语法 :</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table [if not exists] `表名`(</span><br><span class="line">   &#x27;字段名1&#x27; 列类型 [属性][索引][注释],</span><br><span class="line">   &#x27;字段名2&#x27; 列类型 [属性][索引][注释],</span><br><span class="line">  #...</span><br><span class="line">   &#x27;字段名n&#x27; 列类型 [属性][索引][注释]</span><br><span class="line">)[表类型][表字符集][注释];</span><br></pre></td></tr></table></figure><ul><li><strong>说明 :</strong><ul><li>反引号用于区别MySQL保留字与普通字符而引入的 (键盘esc下面的键)。</li><li>小括号之间创建的各个列之间有逗号，但是最后一个没有逗号。</li><li>表明随便取；字段名也是随便取（可中文可英文）。</li></ul></li><li>案例代码：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `user`( </span><br><span class="line">    `id` INT(10) NOT NULL COMMENT &#x27;学员ID&#x27;, </span><br><span class="line">    `name` VARCHAR(100) NOT NULL COMMENT &#x27;学员姓名&#x27;, </span><br><span class="line">    `age` INT(3) NOT NULL COMMENT &#x27;学员年龄&#x27;, </span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB CHARSET=utf8 COLLATE=utf8_general_ci;</span><br></pre></td></tr></table></figure><ul><li>例如,性别字段,默认为”男” , 否则为 “女” ; 若无指定该列的值 , 则默认值为”男”的值；</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-- 目标 : 创建一个school数据库</span><br><span class="line">-- 创建学生表(列,字段)</span><br><span class="line">-- 学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email</span><br><span class="line"></span><br><span class="line">-- 创建表之前, 一定要先选择数据库</span><br><span class="line">USE school;</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS `student` (</span><br><span class="line">    `id` int(4) NOT NULL AUTO_INCREMENT COMMENT &#x27;学号&#x27;,</span><br><span class="line">    `name` varchar(30) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">    `pwd` varchar(20) NOT NULL DEFAULT &#x27;123456&#x27; COMMENT &#x27;密码&#x27;,</span><br><span class="line">    `sex` varchar(2) NOT NULL DEFAULT &#x27;男&#x27; COMMENT &#x27;性别&#x27;,</span><br><span class="line">    `birthday` datetime DEFAULT NULL COMMENT &#x27;出生日期&#x27;,</span><br><span class="line">    `address` varchar(100) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">    `email` varchar(50) DEFAULT NULL COMMENT &#x27;邮箱&#x27;,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- 查看数据库的定义</span><br><span class="line">SHOW CREATE DATABASE school;</span><br><span class="line"></span><br><span class="line">-- 查看数据表的定义</span><br><span class="line">SHOW CREATE TABLE student;</span><br><span class="line"></span><br><span class="line">-- 显示表结构</span><br><span class="line">DESC student;  -- 设置严格检查模式(不能容错了)SET sql_mode=&#x27;STRICT_TRANS_TABLES&#x27;;</span><br></pre></td></tr></table></figure><h3 id="5-数据表的类型"><a href="#5-数据表的类型" class="headerlink" title="5.数据表的类型"></a>5.数据表的类型</h3><blockquote><p>设置数据表的类型</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">   -- 省略的代码</span><br><span class="line">   -- Mysql注释</span><br><span class="line">   -- 1. # 单行注释</span><br><span class="line">   -- 2. /*...*/ 多行注释</span><br><span class="line">)ENGINE = MyISAM (or InnoDB)</span><br><span class="line"></span><br><span class="line">-- 查看mysql所支持的引擎类型 (表类型)</span><br><span class="line">SHOW ENGINES;</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210712091622902.png" alt="image-20210712091622902"></p><ul><li>MySQL的数据表的类型 : <strong>MyISAM</strong> , <strong>InnoDB</strong> , HEAP , BOB , CSV等…</li></ul><blockquote><p>常见的 MyISAM 与 InnoDB 类型：</p></blockquote><table><thead><tr><th align="center">名称</th><th align="center">MyISAM</th><th align="center">InnoDB</th></tr></thead><tbody><tr><td align="center">事务处理</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">数据行锁定</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">外键约束</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">全文索引</td><td align="center">支持</td><td align="center">不支持</td></tr><tr><td align="center">表空间大小</td><td align="center">较小</td><td align="center">较大，约2倍</td></tr></tbody></table><blockquote><p>适用场合:</p></blockquote><ul><li>适用 MyISAM : 节约空间及相应速度；</li><li>适用 InnoDB : 安全性 , 事务处理，多用户操作数据表；</li></ul><blockquote><p>在物理空间存在的位置</p></blockquote><ul><li><p>MySQL数据表以文件方式存放在磁盘中；</p><ul><li>包括表文件 , 数据文件 , 以及数据库的选项文件；</li><li>位置 : Mysql安装目录\data\下存放数据表 . 目录名对应数据库名 , 该目录下文件名对应数据表；</li></ul></li><li><p>注意 :</p><ul><li>* . frm – 表结构定义文件；</li><li>* . MYD – 数据文件 ( data )；</li><li>* . MYI – 索引文件 ( index )；</li><li>InnoDB类型数据表只有一个 *.frm文件 , 以及上一级目录的ibdata1文件；</li><li>MyISAM类型数据表对应三个文件：</li></ul></li></ul><p><img src="/../img/MySQL/image-20210712091319712.png" alt="image-20210712091319712"></p><blockquote><p>设置数据表字符集</p></blockquote><ul><li>我们可为数据库,数据表,数据列设定不同的字符集，设定方法：<ul><li>创建时通过命令来设置 , 如 : CREATE TABLE 表名() CHARSET &#x3D; utf8;</li><li>如无设定 , 则根据MySQL数据库配置文件 my.ini 中的参数设定。</li></ul></li></ul><h3 id="6-修改数据库"><a href="#6-修改数据库" class="headerlink" title="6.修改数据库"></a>6.修改数据库</h3><blockquote><p>修改表 ( ALTER TABLE )</p></blockquote><ul><li><p>修改表名 :<code>ALTER TABLE 旧表名 RENAME AS 新表名；</code></p></li><li><p>添加字段 : <code>ALTER TABLE 表名 ADD 字段名 列属性[属性]；</code></p></li><li><p>修改字段 :</p><ul><li><code>ALTER TABLE 表名 MODIFY 字段名 列类型[属性]；</code></li><li><code>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性]；</code></li></ul></li><li><p>删除字段 : <code>ALTER TABLE 表名 DROP 字段名；</code></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">USE school;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `teacher`( </span><br><span class="line">    `id` INT(10) NOT NULL COMMENT &#x27;教师ID&#x27;, </span><br><span class="line">    `name` VARCHAR(100) NOT NULL COMMENT &#x27;教师姓名&#x27;, </span><br><span class="line">    `age` INT(3) NOT NULL COMMENT &#x27;教师年龄&#x27;, </span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNOBASE CHARSET=utf8 COLLATE=utf8_general_ci;</span><br><span class="line"></span><br><span class="line">-- 修改表名 :`ALTER TABLE 旧表名 RENAME AS 新表名；`</span><br><span class="line">ALTER TABLE teacher RENAME AS teacher1;</span><br><span class="line"></span><br><span class="line">-- 添加字段 : `ALTER TABLE 表名 ADD 字段名 列属性[属性]；`</span><br><span class="line">ALTER TABLE teacher1 ADD age INT(12);</span><br><span class="line"></span><br><span class="line">-- 修改字段 : `ALTER TABLE 表名 MODIFY 字段名 列类型[属性]；`</span><br><span class="line">ALTER TABLE teacher1 MODIFY age VARCHAR(12);	-- 修改约束</span><br><span class="line">ALTER TABLE teacher1 CHANGE age age1 INT(12);    -- 字段重命名</span><br><span class="line"></span><br><span class="line">-- 删除字段 :  `ALTER TABLE 表名 DROP 字段名；`</span><br><span class="line">ALTER TABLE teacher1 DROP age1;</span><br></pre></td></tr></table></figure><blockquote><p>删除数据表</p></blockquote><ul><li>语法：<code>DROP TABLE [IF EXISTS] 表名；</code><ul><li>IF EXISTS 为可选 , 判断是否存在该数据表；</li><li>如删除不存在的数据表会抛出错误；</li></ul></li></ul><p><img src="/../img/MySQL/image-20210712095347985.png" alt="image-20210712095347985"></p><blockquote><p>注意点：</p></blockquote><ol><li>可用反引号（&#96;）为标识符（库名、表名、字段名、索引、别名）包裹，以避免与关键字重名！中文也可以作为标识符！</li><li>每个库目录存在一个保存当前数据库的选项文件db.opt。</li><li>注释：<ol><li>单行注释： # 注释内容</li><li>多行注释 ：&#x2F;* 注释内容 *&#x2F;</li><li>单行注释： – 注释内容 (标准SQL注释风格，要求双破折号后加一空格符（空格、TAB、换行等）)</li></ol></li><li>模式通配符：<ol><li>_ ： 任意单个字符</li><li>% ： 任意多个字符，甚至包括零字符</li><li>单引号需要进行转义 \‘</li></ol></li><li>CMD命令行内的语句结束符可以为 “;”, “\G”, “\g”，仅影响显示结果。其他地方还是用分号结束。delimiter 可修改当前对话的语句结束符。</li><li><code>SQL对大小写不敏感 （关键字）</code></li><li><code>清除已有语句：\c</code></li></ol><h2 id="3-MySQL数据管理"><a href="#3-MySQL数据管理" class="headerlink" title="3.MySQL数据管理"></a>3.MySQL数据管理</h2><h3 id="1-外键"><a href="#1-外键" class="headerlink" title="1.外键"></a>1.外键</h3><blockquote><p>外键概念</p></blockquote><p><img src="/../img/MySQL/image-20210712101600452.png" alt="image-20210712101600452"></p><p>​ 如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为<strong>主表</strong>，具有此外键的表被称为主表的<strong>从表</strong>。</p><p>​ 在实际操作中，将一个表的值放入第二个表来表示关联，所使用的值是第一个表的主键值(在必要时可包括复合主键值)。此时，第二个表中保存这些值的属性称为外键(<strong>foreign key</strong>)。</p><ul><li><strong>外键作用</strong><ul><li>保持数据<strong>一致性</strong>，<strong>完整性</strong>，主要目的是控制存储在外键表中的数据，<strong>约束</strong>。使两张表形成关联，外键只能引用外表中的列的值或使用空值。</li></ul></li></ul><blockquote><p>创建外键</p></blockquote><ul><li>方式一：建表时指定外键约束。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- 创建外键的方式一 : 创建子表同时创建外键</span><br><span class="line"></span><br><span class="line">-- 年级表 (id\年级名称)</span><br><span class="line">CREATE TABLE `grade` (</span><br><span class="line">`gradeid` INT(10) NOT NULL AUTO_INCREMENT COMMENT &#x27;年级ID&#x27;,</span><br><span class="line">`gradename` VARCHAR(50) NOT NULL COMMENT &#x27;年级名称&#x27;,</span><br><span class="line">PRIMARY KEY (`gradeid`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- 学生信息表 (学号,姓名,性别,年级,手机,地址,出生日期,邮箱,身份证号)</span><br><span class="line">CREATE TABLE `student2` (</span><br><span class="line">`studentno` INT(4) NOT NULL COMMENT &#x27;学号&#x27;,</span><br><span class="line">`studentname` VARCHAR(20) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">`sex` TINYINT(1) DEFAULT &#x27;1&#x27; COMMENT &#x27;性别&#x27;,</span><br><span class="line">`gradeid` INT(10) DEFAULT NULL COMMENT &#x27;年级&#x27;,</span><br><span class="line">`phoneNum` VARCHAR(50) NOT NULL COMMENT &#x27;手机&#x27;,</span><br><span class="line">`address` VARCHAR(255) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">`borndate` DATETIME DEFAULT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">`email` VARCHAR(50) DEFAULT NULL COMMENT &#x27;邮箱&#x27;,</span><br><span class="line">`idCard` VARCHAR(18) DEFAULT NULL COMMENT &#x27;身份证号&#x27;,</span><br><span class="line">PRIMARY KEY (`studentno`),</span><br><span class="line">KEY `FK_gradeid` (`gradeid`),</span><br><span class="line">CONSTRAINT `FK_gradeid` FOREIGN KEY (`gradeid`) REFERENCES `grade` (`gradeid`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><ul><li>当创建完子表之后，点开你创建的这个表，如果可以在你创建的这个表的indexes下面看到你创建的外键名，则创建外键就成功了。如下：</li></ul><p><img src="/../img/MySQL/image-20210712101939889.png" alt="image-20210712101939889"></p><ul><li>方式二：建表后修改。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 创建外键方式二 : 创建子表完毕后,修改子表添加外键</span><br><span class="line">CREATE TABLE `student` (</span><br><span class="line">`id` INT(4) NOT NULL COMMENT &#x27;学号&#x27;,</span><br><span class="line">`name` VARCHAR(20) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">`sex` TINYINT(1) DEFAULT &#x27;1&#x27; COMMENT &#x27;性别&#x27;,</span><br><span class="line">`gradeid` INT(10) DEFAULT NULL COMMENT &#x27;年级&#x27;,</span><br><span class="line">`phoneNum` VARCHAR(50) NOT NULL COMMENT &#x27;手机&#x27;,</span><br><span class="line">`address` VARCHAR(255) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">`borndate` DATETIME DEFAULT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">`email` VARCHAR(50) DEFAULT NULL COMMENT &#x27;邮箱&#x27;,</span><br><span class="line">`idCard` VARCHAR(18) DEFAULT NULL COMMENT &#x27;身份证号&#x27;,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">ALTER TABLE `student`</span><br><span class="line">ADD CONSTRAINT `FK_gradeid` FOREIGN KEY (`gradeid`) REFERENCES `grade` (`gradeid`);</span><br></pre></td></tr></table></figure><ul><li>错误代码： 1022 Can’t write; duplicate key in table ‘#sql-150c_3’<ul><li>外键名称重复导致，改为不同名字就可以了。</li></ul></li></ul><p><img src="/../img/MySQL/image-20210712105123239.png" alt="image-20210712105123239"></p><blockquote><p>删除外键</p></blockquote><ul><li>操作：删除 grade 表，发现报错；</li></ul><p><img src="/../img/MySQL/image-20210712103310519.png" alt="image-20210712103310519"></p><ul><li><strong>注意</strong> : &#x3D;&#x3D;删除具有主外键关系的表时 , 要先删子表 , 后删主表&#x3D;&#x3D;。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 删除外键</span><br><span class="line">ALTER TABLE student DROP FOREIGN KEY FK_gradeid;</span><br><span class="line">-- 发现执行完上面的,索引还在,所以还要删除索引</span><br><span class="line">-- 注:这个索引是建立外键的时候默认生成的</span><br><span class="line">ALTER TABLE student DROP INDEX FK_gradeid;</span><br></pre></td></tr></table></figure><h3 id="2-DML语言"><a href="#2-DML语言" class="headerlink" title="2.DML语言"></a>2.DML语言</h3><blockquote><p><strong>数据库意义</strong> ： 数据存储、数据管理。</p></blockquote><p><strong>管理数据库数据方法：</strong></p><ul><li>通过SQLyog等管理工具管理数据库数据；</li><li>通过<strong>DML语句</strong>管理数据库数据；</li></ul><p><strong>DML语言</strong> ：数据操作语言。</p><ul><li><p>用于操作数据库对象中所包含的数据；</p></li><li><p>包括 :</p></li><li><ul><li>INSERT (添加数据语句)；</li><li>UPDATE (更新数据语句)；</li><li>DELETE (删除数据语句)；</li></ul></li></ul><h3 id="3-添加数据"><a href="#3-添加数据" class="headerlink" title="3.添加数据"></a>3.添加数据</h3><blockquote><p>INSERT命令</p></blockquote><ul><li><p><strong>语法：</strong><code>INSERT INTO 表名[(字段1,字段2,字段3,...)] VALUES(&#39;值1&#39;,&#39;值2&#39;,&#39;值3&#39;);</code></p></li><li><p><strong>注意 :</strong></p><ul><li>字段或值之间用英文逗号隔开；</li><li>‘ 字段1,字段2…’ 该部分可省略 , 但添加的值务必与表结构,数据列,顺序相对应,且数量一致；</li><li>可同时插入多条数据 , values 后用英文逗号隔开；</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 插入语句（添加）</span><br><span class="line">-- 语法 : INSERT INTO 表名[(字段1,字段2,字段3,...)] VALUES(&#x27;值1&#x27;,&#x27;值2&#x27;,&#x27;值3&#x27;)</span><br><span class="line">INSERT INTO grade(gradename) VALUES (&#x27;大一&#x27;);</span><br><span class="line"></span><br><span class="line">-- 主键自增,那能否省略呢?</span><br><span class="line">INSERT INTO grade VALUES (&#x27;大二&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询:INSERT INTO grade VALUE (&#x27;大二&#x27;)</span><br><span class="line">-- 错误代码：1136 Column count doesn`t match value count at row 1</span><br><span class="line"></span><br><span class="line">-- 一次插入多条数据</span><br><span class="line">INSERT INTO grade(gradename) VALUES (&#x27;大三&#x27;),(&#x27;大四&#x27;);</span><br><span class="line"></span><br><span class="line">-- 结论:&#x27;字段1,字段2...&#x27;该部分可省略 , 但添加的值务必与表结构,数据列,顺序相对应,且数量一致.</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210712110833170.png" alt="image-20210712111259832"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `student` (</span><br><span class="line">  `id` INT(4) NOT NULL AUTO_INCREMENT COMMENT &#x27;学号&#x27;,</span><br><span class="line">  `name` VARCHAR(20) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">  `sex` VARCHAR(10) DEFAULT &#x27;1&#x27; COMMENT &#x27;性别&#x27;,</span><br><span class="line">  `gradeid` INT(10) DEFAULT NULL COMMENT &#x27;年级&#x27;,</span><br><span class="line">  `phoneNum` VARCHAR(50) DEFAULT NULL COMMENT &#x27;手机&#x27;,</span><br><span class="line">  `address` VARCHAR(255) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">  `borndate` DATETIME DEFAULT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">  `email` VARCHAR(50) DEFAULT NULL COMMENT &#x27;邮箱&#x27;,</span><br><span class="line">  `idCard` VARCHAR(18) DEFAULT NULL COMMENT &#x27;身份证号&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `FK_gradeid2` (`gradeid`)</span><br><span class="line">) ENGINE=INNODB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO `student`(`name`) VALUES (&#x27;张三&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO `student`(`name`,`address`,`sex`) VALUES (&#x27;张三&#x27;,&#x27;admin&#x27;,&#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO `student`(`name`,`address`,`sex`) </span><br><span class="line">VALUES (&#x27;李四&#x27;,&#x27;pppppp&#x27;,&#x27;女&#x27;),(&#x27;王五&#x27;,&#x27;tttttt&#x27;,&#x27;男&#x27;);</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210713112818206.png" alt="image-20210713112818206"></p><h3 id="4-修改数据"><a href="#4-修改数据" class="headerlink" title="4.修改数据"></a>4.修改数据</h3><blockquote><p>update命令</p></blockquote><ul><li><p>语法：<code>UPDATE 表名 SET column_name=value [,column_name2=value2,...] [WHEREcondition];</code></p></li><li><p><strong>注意 :</strong></p><ul><li>column_name 为要更改的数据列；</li><li>value 为修改后的数据 , 可以为变量 , 具体指 , 表达式或者嵌套的SELECT结果；</li><li>condition 为筛选条件 , 如不指定则修改该表的所有列数据；</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 案例</span><br><span class="line">UPDATE `student` SET `name`=&#x27;subei&#x27;,`birthday`=CURRENT_DATE WHERE id = 5;</span><br></pre></td></tr></table></figure></li><li><p>测试：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 修改年级名字，带了简介</span><br><span class="line">UPDATE grade SET gradename = &#x27;高中&#x27; WHERE gradeid = 1;</span><br><span class="line"></span><br><span class="line">-- 不指定条件情况下，会改动所有的表</span><br><span class="line">UPDATE `grade` SET `gradename`=&#x27;果汁&#x27;;</span><br><span class="line"></span><br><span class="line">-- 修改多个属性</span><br><span class="line">UPDATE `student` SET `name`=&#x27;admin&#x27;,`email`=&#x27;2943357596@qq.com&#x27; WHERE id = 2;</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210713114000926.png" alt="image-20210713114000926"></p><blockquote><p>where条件子句，可以简单理解为 : 有条件地从表中筛选数据。</p></blockquote><table><thead><tr><th align="center">运算符</th><th align="center">含义</th><th align="center">范例</th><th align="center">结果</th></tr></thead><tbody><tr><td align="center">&#x3D;</td><td align="center">等于</td><td align="center">5&#x3D;6</td><td align="center">false</td></tr><tr><td align="center">&lt; &gt; 或 !&#x3D;</td><td align="center">不等于</td><td align="center">5!&#x3D;6</td><td align="center">true</td></tr><tr><td align="center">&gt;</td><td align="center">大于</td><td align="center">5&gt;6</td><td align="center">false</td></tr><tr><td align="center">&lt;</td><td align="center">小于</td><td align="center">5&lt;6</td><td align="center">true</td></tr><tr><td align="center">&gt;&#x3D;</td><td align="center">大于等于</td><td align="center">5&gt;&#x3D;6</td><td align="center">false</td></tr><tr><td align="center">&lt;&#x3D;</td><td align="center">小于等于</td><td align="center">5&lt;&#x3D;6</td><td align="center">true</td></tr><tr><td align="center">BETWEEN</td><td align="center">在某个范围之间</td><td align="center">BETWEEN 5 AND 10</td><td align="center">-</td></tr><tr><td align="center">AND</td><td align="center">并且</td><td align="center">5&gt;1 AND 1&gt;2</td><td align="center">false</td></tr><tr><td align="center">OR</td><td align="center">或</td><td align="center">5&gt;1 OR 1&gt;2</td><td align="center">true</td></tr></tbody></table><ul><li>测试2：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE `student` SET `name` = &#x27;高中&#x27; WHERE `id` &lt;= 3;</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210713115244151.png" alt="image-20210713115244151"></p><h3 id="5-删除数据"><a href="#5-删除数据" class="headerlink" title="5.删除数据"></a>5.删除数据</h3><blockquote><p>DELETE命令</p></blockquote><ul><li><p>语法：<code>DELETE FROM 表名 [WHERE condition];</code></p></li><li><p>注意：condition为筛选条件 , 如不指定则删除该表的所有列数据。</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 删除最后一个数据</span><br><span class="line">DELETE FROM grade WHERE gradeid = 5;</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210713121332661.png" alt="image-20210713121332661"></p><blockquote><p>TRUNCATE命令</p></blockquote><ul><li><p>作用：用于完全清空表数据 , 但表结构 , 索引 , 约束等不变；</p></li><li><p>语法：<code>TRUNCATE [TABLE] 表名;</code></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 清空年级表</span><br><span class="line">TRUNCATE grade;</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意：区别于DELETE命令</strong></p></blockquote><ul><li>相同：都能删除数据 , 不删除表结构 , 但TRUNCATE速度更快；</li><li>不同：<ul><li>使用TRUNCATE TABLE 重新设置AUTO_INCREMENT计数器；</li><li>使用TRUNCATE TABLE不会对事务有影响。</li></ul></li><li>测试：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个测试表</span><br><span class="line">CREATE TABLE `test` (</span><br><span class="line">`id` INT(4) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`coll` VARCHAR(20) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- 插入几个测试数据</span><br><span class="line">INSERT INTO test(coll) VALUES(&#x27;row1&#x27;),(&#x27;row2&#x27;),(&#x27;row3&#x27;);</span><br><span class="line"></span><br><span class="line">-- 删除表数据(不带where条件的delete)</span><br><span class="line">DELETE FROM test;</span><br><span class="line">-- 结论:如不指定Where则删除该表的所有列数据,自增当前值依然从原来基础上进行,会记录日志.</span><br><span class="line"></span><br><span class="line">-- 删除表数据(truncate)</span><br><span class="line">TRUNCATE TABLE test;</span><br><span class="line">-- 结论:truncate删除数据,自增当前值会恢复到初始值重新开始;不会记录日志.</span><br><span class="line"></span><br><span class="line">-- 同样使用DELETE清空不同引擎的数据库表数据.重启数据库服务后</span><br><span class="line">-- InnoDB : 自增列从初始值重新开始 (因为是存储在内存中,断电即失)</span><br><span class="line">-- MyISAM : 自增列依然从上一个自增数据基础上开始 (存在文件中,不会丢失)</span><br></pre></td></tr></table></figure><h2 id="4-DQL查询数据"><a href="#4-DQL查询数据" class="headerlink" title="4.DQL查询数据"></a>4.DQL查询数据</h2><h3 id="1-DQL语言"><a href="#1-DQL语言" class="headerlink" title="1.DQL语言"></a>1.DQL语言</h3><p><strong>DQL( Data Query Language 数据查询语言 )</strong></p><ul><li>查询数据库数据 , 如<strong>SELECT</strong>语句；</li><li>简单的单表查询或多表的复杂查询和嵌套查询；</li><li>&#x3D;&#x3D;是数据库语言中最核心,最重要的语句&#x3D;&#x3D;；</li><li>使用频率最高的语句；</li></ul><blockquote><p>SELECT语法</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT [ALL | DISTINCT]</span><br><span class="line">&#123;* | table.* | [table.field1[as alias1][,table.field2[as alias2]][,...]]&#125;</span><br><span class="line">FROM table_name [as table_alias]</span><br><span class="line">  [left | right | inner join table_name2]  -- 联合查询</span><br><span class="line">  [WHERE ...]  -- 指定结果需满足的条件</span><br><span class="line">  [GROUP BY ...]  -- 指定结果按照哪几个字段来分组</span><br><span class="line">  [HAVING]  -- 过滤分组的记录必须满足的次要条件</span><br><span class="line">  [ORDER BY ...]  -- 指定查询记录按一个或多个条件排序</span><br><span class="line">  [LIMIT &#123;[offset,]row_count | row_countOFFSET offset&#125;];</span><br><span class="line">   -- 指定查询的记录从哪条至哪条</span><br></pre></td></tr></table></figure><ul><li><strong>注意 : [ ] 括号代表可选的 , { }括号代表必选得</strong>。</li></ul><blockquote><p>SQL准备</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个school数据库</span><br><span class="line">CREATE DATABASE IF NOT EXISTS `school`;</span><br><span class="line"></span><br><span class="line">USE `school`; -- 创建学生表</span><br><span class="line">DROP TABLE IF EXISTS `student`;</span><br><span class="line">CREATE TABLE `student`(</span><br><span class="line">    `studentno` INT(4) NOT NULL COMMENT &#x27;学号&#x27;,</span><br><span class="line">    `loginpwd` VARCHAR(20) DEFAULT NULL,</span><br><span class="line">    `studentname` VARCHAR(20) DEFAULT NULL COMMENT &#x27;学生姓名&#x27;,</span><br><span class="line">    `sex` TINYINT(1) DEFAULT NULL COMMENT &#x27;性别，0或1&#x27;,</span><br><span class="line">    `gradeid` INT(11) DEFAULT NULL COMMENT &#x27;年级编号&#x27;,</span><br><span class="line">    `phone` VARCHAR(50) NOT NULL COMMENT &#x27;联系电话，允许为空&#x27;,</span><br><span class="line">    `address` VARCHAR(255) NOT NULL COMMENT &#x27;地址，允许为空&#x27;,</span><br><span class="line">    `borndate` DATETIME DEFAULT NULL COMMENT &#x27;出生时间&#x27;,</span><br><span class="line">    `email` VARCHAR (50) NOT NULL COMMENT &#x27;邮箱账号允许为空&#x27;,</span><br><span class="line">    `identitycard` VARCHAR(18) DEFAULT NULL COMMENT &#x27;身份证号&#x27;,</span><br><span class="line">    PRIMARY KEY (`studentno`),</span><br><span class="line">    UNIQUE KEY `identitycard`(`identitycard`),</span><br><span class="line">    KEY `email` (`email`)</span><br><span class="line">)ENGINE=MYISAM DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- 创建年级表</span><br><span class="line">DROP TABLE IF EXISTS `grade`;</span><br><span class="line">CREATE TABLE `grade`(</span><br><span class="line">	`gradeid` INT(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;年级编号&#x27;,</span><br><span class="line">  `gradename` VARCHAR(50) NOT NULL COMMENT &#x27;年级名称&#x27;,</span><br><span class="line">    PRIMARY KEY (`gradeid`)</span><br><span class="line">) ENGINE=INNODB AUTO_INCREMENT = 6 DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br><span class="line">-- 创建科目表</span><br><span class="line">DROP TABLE IF EXISTS `subject`;</span><br><span class="line">CREATE TABLE `subject`(</span><br><span class="line">	`subjectno`INT(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;课程编号&#x27;,</span><br><span class="line">    `subjectname` VARCHAR(50) DEFAULT NULL COMMENT &#x27;课程名称&#x27;,</span><br><span class="line">    `classhour` INT(4) DEFAULT NULL COMMENT &#x27;学时&#x27;,</span><br><span class="line">    `gradeid` INT(4) DEFAULT NULL COMMENT &#x27;年级编号&#x27;,</span><br><span class="line">    PRIMARY KEY (`subjectno`)</span><br><span class="line">)ENGINE = INNODB AUTO_INCREMENT = 19 DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br><span class="line">-- 创建成绩表</span><br><span class="line">DROP TABLE IF EXISTS `result`;</span><br><span class="line">CREATE TABLE `result`(</span><br><span class="line">	`studentno` INT(4) NOT NULL COMMENT &#x27;学号&#x27;,</span><br><span class="line">    `subjectno` INT(4) NOT NULL COMMENT &#x27;课程编号&#x27;,</span><br><span class="line">    `examdate` DATETIME NOT NULL COMMENT &#x27;考试日期&#x27;,</span><br><span class="line">    `studentresult` INT (4) NOT NULL COMMENT &#x27;考试成绩&#x27;,</span><br><span class="line">    KEY `subjectno` (`subjectno`)</span><br><span class="line">)ENGINE = INNODB DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br><span class="line">-- 插入学生数据</span><br><span class="line">insert into `student` (`studentno`,`loginpwd`,`studentname`,`sex`,`gradeid`,`phone`,`address`,`borndate`,`email`,`identitycard`)</span><br><span class="line">values</span><br><span class="line">(1000,&#x27;111111&#x27;,&#x27;郭靖&#x27;,1,1,&#x27;13500000001&#x27;,&#x27;北京海淀区中关村大街1号&#x27;,&#x27;1986-12-11 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612111234&#x27;),</span><br><span class="line">(1001,&#x27;123456&#x27;,&#x27;李文才&#x27;,1,2,&#x27;13500000002&#x27;,&#x27;河南洛阳&#x27;,&#x27;1981-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198112311234&#x27;),</span><br><span class="line">(1002,&#x27;111111&#x27;,&#x27;李斯文&#x27;,1,1,&#x27;13500000003&#x27;,&#x27;天津市和平区&#x27;,&#x27;1986-11-30 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198611301234&#x27;),</span><br><span class="line">(1003,&#x27;123456&#x27;,&#x27;武松&#x27;,1,3,&#x27;13500000004&#x27;,&#x27;上海卢湾区&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612314234&#x27;),</span><br><span class="line">(1004,&#x27;123456&#x27;,&#x27;张三&#x27;,1,4,&#x27;13500000005&#x27;,&#x27;北京市通州&#x27;,&#x27;1989-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311244&#x27;),</span><br><span class="line">(1005,&#x27;123456&#x27;,&#x27;张秋丽 &#x27;,2,1,&#x27;13500000006&#x27;,&#x27;广西桂林市灵川&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311214&#x27;),</span><br><span class="line">(1006,&#x27;123456&#x27;,&#x27;肖梅&#x27;,2,4,&#x27;13500000007&#x27;,&#x27;地址不详&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311134&#x27;),</span><br><span class="line">(1007,&#x27;111111&#x27;,&#x27;欧阳峻峰&#x27;,1,1,&#x27;13500000008&#x27;,&#x27;北京东城区&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311133&#x27;),</span><br><span class="line">(1008,&#x27;111111&#x27;,&#x27;梅超风&#x27;,1,1,&#x27;13500000009&#x27;,&#x27;河南洛阳&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311221&#x27;),</span><br><span class="line">(1009,&#x27;123456&#x27;,&#x27;刘毅&#x27;,1,2,&#x27;13500000011&#x27;,&#x27;安徽&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311231&#x27;),</span><br><span class="line">(1010,&#x27;111111&#x27;,&#x27;大凡&#x27;,1,1,&#x27;13500000012&#x27;,&#x27;河南洛阳&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311044&#x27;),</span><br><span class="line">(1011,&#x27;111111&#x27;,&#x27;奥丹斯&#x27;,1,1,&#x27;13500000013&#x27;,&#x27;北京海淀区中关村大街*号&#x27;,&#x27;1984-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198412311234&#x27;),</span><br><span class="line">(1012,&#x27;123456&#x27;,&#x27;多伦&#x27;,2,3,&#x27;13500000014&#x27;,&#x27;广西南宁中央大街&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311334&#x27;),</span><br><span class="line">(1013,&#x27;123456&#x27;,&#x27;李梅&#x27;,2,1,&#x27;13500000015&#x27;,&#x27;上海卢湾区&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311534&#x27;),</span><br><span class="line">(1014,&#x27;123456&#x27;,&#x27;张得&#x27;,2,4,&#x27;13500000016&#x27;,&#x27;北京海淀区中关村大街*号&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311264&#x27;),</span><br><span class="line">(1015,&#x27;123456&#x27;,&#x27;李东方&#x27;,1,4,&#x27;13500000017&#x27;,&#x27;广西桂林市灵川&#x27;,&#x27;1976-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323197612311234&#x27;),</span><br><span class="line">(1016,&#x27;111111&#x27;,&#x27;刘奋斗&#x27;,1,1,&#x27;13500000018&#x27;,&#x27;上海卢湾区&#x27;,&#x27;1986-12-31 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198612311251&#x27;),</span><br><span class="line">(1017,&#x27;123456&#x27;,&#x27;可可&#x27;,2,3,&#x27;13500000019&#x27;,&#x27;北京长安街1号&#x27;,&#x27;1981-09-10 00:00:00&#x27;,&#x27;test1@bdqn.cn&#x27;,&#x27;450323198109108311&#x27;),</span><br><span class="line">(10066,&#x27;&#x27;,&#x27;Tom&#x27;,1,1,&#x27;13500000000&#x27;,&#x27;&#x27;,&#x27;0000-00-00 00:00:00&#x27;,&#x27;email@22.com&#x27;,&#x27;33123123123123123&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入成绩数据</span><br><span class="line">insert into `result`(`studentno`,`subjectno`,`examdate`,`studentresult`)</span><br><span class="line">values</span><br><span class="line">(1000,1,&#x27;2013-11-11 16:00:00&#x27;,85),</span><br><span class="line">(1000,2,&#x27;2012-11-10 10:00:00&#x27;,75),</span><br><span class="line">(1000,3,&#x27;2011-12-19 10:00:00&#x27;,76),</span><br><span class="line">(1000,4,&#x27;2010-11-18 11:00:00&#x27;,93),</span><br><span class="line">(1000,5,&#x27;2013-11-11 14:00:00&#x27;,97),</span><br><span class="line">(1000,6,&#x27;2012-09-13 15:00:00&#x27;,87),</span><br><span class="line">(1000,7,&#x27;2011-10-16 16:00:00&#x27;,79),</span><br><span class="line">(1000,8,&#x27;2010-11-11 16:00:00&#x27;,74),</span><br><span class="line">(1000,9,&#x27;2013-11-21 10:00:00&#x27;,69),</span><br><span class="line">(1000,10,&#x27;2012-11-11 12:00:00&#x27;,78),</span><br><span class="line">(1000,11,&#x27;2011-11-11 14:00:00&#x27;,66),</span><br><span class="line">(1000,12,&#x27;2010-11-11 15:00:00&#x27;,82),</span><br><span class="line">(1000,13,&#x27;2013-11-11 14:00:00&#x27;,94),</span><br><span class="line">(1000,14,&#x27;2012-11-11 15:00:00&#x27;,98),</span><br><span class="line">(1000,15,&#x27;2011-12-11 10:00:00&#x27;,70),</span><br><span class="line">(1000,16,&#x27;2010-09-11 10:00:00&#x27;,74),</span><br><span class="line">(1001,1,&#x27;2013-11-11 16:00:00&#x27;,76),</span><br><span class="line">(1001,2,&#x27;2012-11-10 10:00:00&#x27;,93),</span><br><span class="line">(1001,3,&#x27;2011-12-19 10:00:00&#x27;,65),</span><br><span class="line">(1001,4,&#x27;2010-11-18 11:00:00&#x27;,71),</span><br><span class="line">(1001,5,&#x27;2013-11-11 14:00:00&#x27;,98),</span><br><span class="line">(1001,6,&#x27;2012-09-13 15:00:00&#x27;,74),</span><br><span class="line">(1001,7,&#x27;2011-10-16 16:00:00&#x27;,85),</span><br><span class="line">(1001,8,&#x27;2010-11-11 16:00:00&#x27;,69),</span><br><span class="line">(1001,9,&#x27;2013-11-21 10:00:00&#x27;,63),</span><br><span class="line">(1001,10,&#x27;2012-11-11 12:00:00&#x27;,70),</span><br><span class="line">(1001,11,&#x27;2011-11-11 14:00:00&#x27;,62),</span><br><span class="line">(1001,12,&#x27;2010-11-11 15:00:00&#x27;,90),</span><br><span class="line">(1001,13,&#x27;2013-11-11 14:00:00&#x27;,97),</span><br><span class="line">(1001,14,&#x27;2012-11-11 15:00:00&#x27;,89),</span><br><span class="line">(1001,15,&#x27;2011-12-11 10:00:00&#x27;,72),</span><br><span class="line">(1001,16,&#x27;2010-09-11 10:00:00&#x27;,90),</span><br><span class="line">(1002,1,&#x27;2013-11-11 16:00:00&#x27;,61),</span><br><span class="line">(1002,2,&#x27;2012-11-10 10:00:00&#x27;,80),</span><br><span class="line">(1002,3,&#x27;2011-12-19 10:00:00&#x27;,89),</span><br><span class="line">(1002,4,&#x27;2010-11-18 11:00:00&#x27;,88),</span><br><span class="line">(1002,5,&#x27;2013-11-11 14:00:00&#x27;,82),</span><br><span class="line">(1002,6,&#x27;2012-09-13 15:00:00&#x27;,91),</span><br><span class="line">(1002,7,&#x27;2011-10-16 16:00:00&#x27;,63),</span><br><span class="line">(1002,8,&#x27;2010-11-11 16:00:00&#x27;,84),</span><br><span class="line">(1002,9,&#x27;2013-11-21 10:00:00&#x27;,60),</span><br><span class="line">(1002,10,&#x27;2012-11-11 12:00:00&#x27;,71),</span><br><span class="line">(1002,11,&#x27;2011-11-11 14:00:00&#x27;,93),</span><br><span class="line">(1002,12,&#x27;2010-11-11 15:00:00&#x27;,96),</span><br><span class="line">(1002,13,&#x27;2013-11-11 14:00:00&#x27;,83),</span><br><span class="line">(1002,14,&#x27;2012-11-11 15:00:00&#x27;,69),</span><br><span class="line">(1002,15,&#x27;2011-12-11 10:00:00&#x27;,89),</span><br><span class="line">(1002,16,&#x27;2010-09-11 10:00:00&#x27;,83),</span><br><span class="line">(1003,1,&#x27;2013-11-11 16:00:00&#x27;,91),</span><br><span class="line">(1003,2,&#x27;2012-11-10 10:00:00&#x27;,75),</span><br><span class="line">(1003,3,&#x27;2011-12-19 10:00:00&#x27;,65),</span><br><span class="line">(1003,4,&#x27;2010-11-18 11:00:00&#x27;,63),</span><br><span class="line">(1003,5,&#x27;2013-11-11 14:00:00&#x27;,90),</span><br><span class="line">(1003,6,&#x27;2012-09-13 15:00:00&#x27;,96),</span><br><span class="line">(1003,7,&#x27;2011-10-16 16:00:00&#x27;,97),</span><br><span class="line">(1003,8,&#x27;2010-11-11 16:00:00&#x27;,77),</span><br><span class="line">(1003,9,&#x27;2013-11-21 10:00:00&#x27;,62),</span><br><span class="line">(1003,10,&#x27;2012-11-11 12:00:00&#x27;,81),</span><br><span class="line">(1003,11,&#x27;2011-11-11 14:00:00&#x27;,76),</span><br><span class="line">(1003,12,&#x27;2010-11-11 15:00:00&#x27;,61),</span><br><span class="line">(1003,13,&#x27;2013-11-11 14:00:00&#x27;,93),</span><br><span class="line">(1003,14,&#x27;2012-11-11 15:00:00&#x27;,79),</span><br><span class="line">(1003,15,&#x27;2011-12-11 10:00:00&#x27;,78),</span><br><span class="line">(1003,16,&#x27;2010-09-11 10:00:00&#x27;,96),</span><br><span class="line">(1004,1,&#x27;2013-11-11 16:00:00&#x27;,84),</span><br><span class="line">(1004,2,&#x27;2012-11-10 10:00:00&#x27;,79),</span><br><span class="line">(1004,3,&#x27;2011-12-19 10:00:00&#x27;,76),</span><br><span class="line">(1004,4,&#x27;2010-11-18 11:00:00&#x27;,78),</span><br><span class="line">(1004,5,&#x27;2013-11-11 14:00:00&#x27;,81),</span><br><span class="line">(1004,6,&#x27;2012-09-13 15:00:00&#x27;,90),</span><br><span class="line">(1004,7,&#x27;2011-10-16 16:00:00&#x27;,63),</span><br><span class="line">(1004,8,&#x27;2010-11-11 16:00:00&#x27;,89),</span><br><span class="line">(1004,9,&#x27;2013-11-21 10:00:00&#x27;,67),</span><br><span class="line">(1004,10,&#x27;2012-11-11 12:00:00&#x27;,100),</span><br><span class="line">(1004,11,&#x27;2011-11-11 14:00:00&#x27;,94),</span><br><span class="line">(1004,12,&#x27;2010-11-11 15:00:00&#x27;,65),</span><br><span class="line">(1004,13,&#x27;2013-11-11 14:00:00&#x27;,86),</span><br><span class="line">(1004,14,&#x27;2012-11-11 15:00:00&#x27;,77),</span><br><span class="line">(1004,15,&#x27;2011-12-11 10:00:00&#x27;,82),</span><br><span class="line">(1004,16,&#x27;2010-09-11 10:00:00&#x27;,87),</span><br><span class="line">(1005,1,&#x27;2013-11-11 16:00:00&#x27;,82),</span><br><span class="line">(1005,2,&#x27;2012-11-10 10:00:00&#x27;,92),</span><br><span class="line">(1005,3,&#x27;2011-12-19 10:00:00&#x27;,80),</span><br><span class="line">(1005,4,&#x27;2010-11-18 11:00:00&#x27;,92),</span><br><span class="line">(1005,5,&#x27;2013-11-11 14:00:00&#x27;,97),</span><br><span class="line">(1005,6,&#x27;2012-09-13 15:00:00&#x27;,72),</span><br><span class="line">(1005,7,&#x27;2011-10-16 16:00:00&#x27;,84),</span><br><span class="line">(1005,8,&#x27;2010-11-11 16:00:00&#x27;,79),</span><br><span class="line">(1005,9,&#x27;2013-11-21 10:00:00&#x27;,76),</span><br><span class="line">(1005,10,&#x27;2012-11-11 12:00:00&#x27;,87),</span><br><span class="line">(1005,11,&#x27;2011-11-11 14:00:00&#x27;,65),</span><br><span class="line">(1005,12,&#x27;2010-11-11 15:00:00&#x27;,67),</span><br><span class="line">(1005,13,&#x27;2013-11-11 14:00:00&#x27;,63),</span><br><span class="line">(1005,14,&#x27;2012-11-11 15:00:00&#x27;,64),</span><br><span class="line">(1005,15,&#x27;2011-12-11 10:00:00&#x27;,99),</span><br><span class="line">(1005,16,&#x27;2010-09-11 10:00:00&#x27;,97),</span><br><span class="line">(1006,1,&#x27;2013-11-11 16:00:00&#x27;,82),</span><br><span class="line">(1006,2,&#x27;2012-11-10 10:00:00&#x27;,73),</span><br><span class="line">(1006,3,&#x27;2011-12-19 10:00:00&#x27;,79),</span><br><span class="line">(1006,4,&#x27;2010-11-18 11:00:00&#x27;,63),</span><br><span class="line">(1006,5,&#x27;2013-11-11 14:00:00&#x27;,97),</span><br><span class="line">(1006,6,&#x27;2012-09-13 15:00:00&#x27;,83),</span><br><span class="line">(1006,7,&#x27;2011-10-16 16:00:00&#x27;,78),</span><br><span class="line">(1006,8,&#x27;2010-11-11 16:00:00&#x27;,88),</span><br><span class="line">(1006,9,&#x27;2013-11-21 10:00:00&#x27;,89),</span><br><span class="line">(1006,10,&#x27;2012-11-11 12:00:00&#x27;,82),</span><br><span class="line">(1006,11,&#x27;2011-11-11 14:00:00&#x27;,70),</span><br><span class="line">(1006,12,&#x27;2010-11-11 15:00:00&#x27;,69),</span><br><span class="line">(1006,13,&#x27;2013-11-11 14:00:00&#x27;,64),</span><br><span class="line">(1006,14,&#x27;2012-11-11 15:00:00&#x27;,80),</span><br><span class="line">(1006,15,&#x27;2011-12-11 10:00:00&#x27;,90),</span><br><span class="line">(1006,16,&#x27;2010-09-11 10:00:00&#x27;,85),</span><br><span class="line">(1007,1,&#x27;2013-11-11 16:00:00&#x27;,87),</span><br><span class="line">(1007,2,&#x27;2012-11-10 10:00:00&#x27;,63),</span><br><span class="line">(1007,3,&#x27;2011-12-19 10:00:00&#x27;,70),</span><br><span class="line">(1007,4,&#x27;2010-11-18 11:00:00&#x27;,74),</span><br><span class="line">(1007,5,&#x27;2013-11-11 14:00:00&#x27;,79),</span><br><span class="line">(1007,6,&#x27;2012-09-13 15:00:00&#x27;,83),</span><br><span class="line">(1007,7,&#x27;2011-10-16 16:00:00&#x27;,86),</span><br><span class="line">(1007,8,&#x27;2010-11-11 16:00:00&#x27;,76),</span><br><span class="line">(1007,9,&#x27;2013-11-21 10:00:00&#x27;,65),</span><br><span class="line">(1007,10,&#x27;2012-11-11 12:00:00&#x27;,87),</span><br><span class="line">(1007,11,&#x27;2011-11-11 14:00:00&#x27;,69),</span><br><span class="line">(1007,12,&#x27;2010-11-11 15:00:00&#x27;,69),</span><br><span class="line">(1007,13,&#x27;2013-11-11 14:00:00&#x27;,90),</span><br><span class="line">(1007,14,&#x27;2012-11-11 15:00:00&#x27;,84),</span><br><span class="line">(1007,15,&#x27;2011-12-11 10:00:00&#x27;,95),</span><br><span class="line">(1007,16,&#x27;2010-09-11 10:00:00&#x27;,92),</span><br><span class="line">(1008,1,&#x27;2013-11-11 16:00:00&#x27;,96),</span><br><span class="line">(1008,2,&#x27;2012-11-10 10:00:00&#x27;,62),</span><br><span class="line">(1008,3,&#x27;2011-12-19 10:00:00&#x27;,97),</span><br><span class="line">(1008,4,&#x27;2010-11-18 11:00:00&#x27;,84),</span><br><span class="line">(1008,5,&#x27;2013-11-11 14:00:00&#x27;,86),</span><br><span class="line">(1008,6,&#x27;2012-09-13 15:00:00&#x27;,72),</span><br><span class="line">(1008,7,&#x27;2011-10-16 16:00:00&#x27;,67),</span><br><span class="line">(1008,8,&#x27;2010-11-11 16:00:00&#x27;,83),</span><br><span class="line">(1008,9,&#x27;2013-11-21 10:00:00&#x27;,86),</span><br><span class="line">(1008,10,&#x27;2012-11-11 12:00:00&#x27;,60),</span><br><span class="line">(1008,11,&#x27;2011-11-11 14:00:00&#x27;,61),</span><br><span class="line">(1008,12,&#x27;2010-11-11 15:00:00&#x27;,68),</span><br><span class="line">(1008,13,&#x27;2013-11-11 14:00:00&#x27;,99),</span><br><span class="line">(1008,14,&#x27;2012-11-11 15:00:00&#x27;,77),</span><br><span class="line">(1008,15,&#x27;2011-12-11 10:00:00&#x27;,73),</span><br><span class="line">(1008,16,&#x27;2010-09-11 10:00:00&#x27;,78),</span><br><span class="line">(1009,1,&#x27;2013-11-11 16:00:00&#x27;,67),</span><br><span class="line">(1009,2,&#x27;2012-11-10 10:00:00&#x27;,70),</span><br><span class="line">(1009,3,&#x27;2011-12-19 10:00:00&#x27;,75),</span><br><span class="line">(1009,4,&#x27;2010-11-18 11:00:00&#x27;,92),</span><br><span class="line">(1009,5,&#x27;2013-11-11 14:00:00&#x27;,76),</span><br><span class="line">(1009,6,&#x27;2012-09-13 15:00:00&#x27;,90),</span><br><span class="line">(1009,7,&#x27;2011-10-16 16:00:00&#x27;,62),</span><br><span class="line">(1009,8,&#x27;2010-11-11 16:00:00&#x27;,68),</span><br><span class="line">(1009,9,&#x27;2013-11-21 10:00:00&#x27;,70),</span><br><span class="line">(1009,10,&#x27;2012-11-11 12:00:00&#x27;,83),</span><br><span class="line">(1009,11,&#x27;2011-11-11 14:00:00&#x27;,88),</span><br><span class="line">(1009,12,&#x27;2010-11-11 15:00:00&#x27;,65),</span><br><span class="line">(1009,13,&#x27;2013-11-11 14:00:00&#x27;,91),</span><br><span class="line">(1009,14,&#x27;2012-11-11 15:00:00&#x27;,99),</span><br><span class="line">(1009,15,&#x27;2011-12-11 10:00:00&#x27;,65),</span><br><span class="line">(1009,16,&#x27;2010-09-11 10:00:00&#x27;,83),</span><br><span class="line">(1010,1,&#x27;2013-11-11 16:00:00&#x27;,83),</span><br><span class="line">(1010,2,&#x27;2012-11-10 10:00:00&#x27;,87),</span><br><span class="line">(1010,3,&#x27;2011-12-19 10:00:00&#x27;,89),</span><br><span class="line">(1010,4,&#x27;2010-11-18 11:00:00&#x27;,99),</span><br><span class="line">(1010,5,&#x27;2013-11-11 14:00:00&#x27;,91),</span><br><span class="line">(1010,6,&#x27;2012-09-13 15:00:00&#x27;,96),</span><br><span class="line">(1010,7,&#x27;2011-10-16 16:00:00&#x27;,72),</span><br><span class="line">(1010,8,&#x27;2010-11-11 16:00:00&#x27;,72),</span><br><span class="line">(1010,9,&#x27;2013-11-21 10:00:00&#x27;,98),</span><br><span class="line">(1010,10,&#x27;2012-11-11 12:00:00&#x27;,73),</span><br><span class="line">(1010,11,&#x27;2011-11-11 14:00:00&#x27;,68),</span><br><span class="line">(1010,12,&#x27;2010-11-11 15:00:00&#x27;,62),</span><br><span class="line">(1010,13,&#x27;2013-11-11 14:00:00&#x27;,67),</span><br><span class="line">(1010,14,&#x27;2012-11-11 15:00:00&#x27;,69),</span><br><span class="line">(1010,15,&#x27;2011-12-11 10:00:00&#x27;,71),</span><br><span class="line">(1010,16,&#x27;2010-09-11 10:00:00&#x27;,66),</span><br><span class="line">(1011,1,&#x27;2013-11-11 16:00:00&#x27;,62),</span><br><span class="line">(1011,2,&#x27;2012-11-10 10:00:00&#x27;,72),</span><br><span class="line">(1011,3,&#x27;2011-12-19 10:00:00&#x27;,96),</span><br><span class="line">(1011,4,&#x27;2010-11-18 11:00:00&#x27;,64),</span><br><span class="line">(1011,5,&#x27;2013-11-11 14:00:00&#x27;,89),</span><br><span class="line">(1011,6,&#x27;2012-09-13 15:00:00&#x27;,91),</span><br><span class="line">(1011,7,&#x27;2011-10-16 16:00:00&#x27;,95),</span><br><span class="line">(1011,8,&#x27;2010-11-11 16:00:00&#x27;,96),</span><br><span class="line">(1011,9,&#x27;2013-11-21 10:00:00&#x27;,89),</span><br><span class="line">(1011,10,&#x27;2012-11-11 12:00:00&#x27;,73),</span><br><span class="line">(1011,11,&#x27;2011-11-11 14:00:00&#x27;,82),</span><br><span class="line">(1011,12,&#x27;2010-11-11 15:00:00&#x27;,98),</span><br><span class="line">(1011,13,&#x27;2013-11-11 14:00:00&#x27;,66),</span><br><span class="line">(1011,14,&#x27;2012-11-11 15:00:00&#x27;,69),</span><br><span class="line">(1011,15,&#x27;2011-12-11 10:00:00&#x27;,91),</span><br><span class="line">(1011,16,&#x27;2010-09-11 10:00:00&#x27;,69),</span><br><span class="line">(1012,1,&#x27;2013-11-11 16:00:00&#x27;,86),</span><br><span class="line">(1012,2,&#x27;2012-11-10 10:00:00&#x27;,66),</span><br><span class="line">(1012,3,&#x27;2011-12-19 10:00:00&#x27;,97),</span><br><span class="line">(1012,4,&#x27;2010-11-18 11:00:00&#x27;,69),</span><br><span class="line">(1012,5,&#x27;2013-11-11 14:00:00&#x27;,70),</span><br><span class="line">(1012,6,&#x27;2012-09-13 15:00:00&#x27;,74),</span><br><span class="line">(1012,7,&#x27;2011-10-16 16:00:00&#x27;,91),</span><br><span class="line">(1012,8,&#x27;2010-11-11 16:00:00&#x27;,97),</span><br><span class="line">(1012,9,&#x27;2013-11-21 10:00:00&#x27;,84),</span><br><span class="line">(1012,10,&#x27;2012-11-11 12:00:00&#x27;,82),</span><br><span class="line">(1012,11,&#x27;2011-11-11 14:00:00&#x27;,90),</span><br><span class="line">(1012,12,&#x27;2010-11-11 15:00:00&#x27;,91),</span><br><span class="line">(1012,13,&#x27;2013-11-11 14:00:00&#x27;,91),</span><br><span class="line">(1012,14,&#x27;2012-11-11 15:00:00&#x27;,97),</span><br><span class="line">(1012,15,&#x27;2011-12-11 10:00:00&#x27;,85),</span><br><span class="line">(1012,16,&#x27;2010-09-11 10:00:00&#x27;,90),</span><br><span class="line">(1013,1,&#x27;2013-11-11 16:00:00&#x27;,73),</span><br><span class="line">(1013,2,&#x27;2012-11-10 10:00:00&#x27;,69),</span><br><span class="line">(1013,3,&#x27;2011-12-19 10:00:00&#x27;,91),</span><br><span class="line">(1013,4,&#x27;2010-11-18 11:00:00&#x27;,72),</span><br><span class="line">(1013,5,&#x27;2013-11-11 14:00:00&#x27;,76),</span><br><span class="line">(1013,6,&#x27;2012-09-13 15:00:00&#x27;,87),</span><br><span class="line">(1013,7,&#x27;2011-10-16 16:00:00&#x27;,61),</span><br><span class="line">(1013,8,&#x27;2010-11-11 16:00:00&#x27;,77),</span><br><span class="line">(1013,9,&#x27;2013-11-21 10:00:00&#x27;,83),</span><br><span class="line">(1013,10,&#x27;2012-11-11 12:00:00&#x27;,99),</span><br><span class="line">(1013,11,&#x27;2011-11-11 14:00:00&#x27;,91),</span><br><span class="line">(1013,12,&#x27;2010-11-11 15:00:00&#x27;,84),</span><br><span class="line">(1013,13,&#x27;2013-11-11 14:00:00&#x27;,98),</span><br><span class="line">(1013,14,&#x27;2012-11-11 15:00:00&#x27;,74),</span><br><span class="line">(1013,15,&#x27;2011-12-11 10:00:00&#x27;,92),</span><br><span class="line">(1013,16,&#x27;2010-09-11 10:00:00&#x27;,90),</span><br><span class="line">(1014,1,&#x27;2013-11-11 16:00:00&#x27;,64),</span><br><span class="line">(1014,2,&#x27;2012-11-10 10:00:00&#x27;,81),</span><br><span class="line">(1014,3,&#x27;2011-12-19 10:00:00&#x27;,79),</span><br><span class="line">(1014,4,&#x27;2010-11-18 11:00:00&#x27;,74),</span><br><span class="line">(1014,5,&#x27;2013-11-11 14:00:00&#x27;,65),</span><br><span class="line">(1014,6,&#x27;2012-09-13 15:00:00&#x27;,88),</span><br><span class="line">(1014,7,&#x27;2011-10-16 16:00:00&#x27;,86),</span><br><span class="line">(1014,8,&#x27;2010-11-11 16:00:00&#x27;,77),</span><br><span class="line">(1014,9,&#x27;2013-11-21 10:00:00&#x27;,86),</span><br><span class="line">(1014,10,&#x27;2012-11-11 12:00:00&#x27;,85),</span><br><span class="line">(1014,11,&#x27;2011-11-11 14:00:00&#x27;,86),</span><br><span class="line">(1014,12,&#x27;2010-11-11 15:00:00&#x27;,75),</span><br><span class="line">(1014,13,&#x27;2013-11-11 14:00:00&#x27;,89),</span><br><span class="line">(1014,14,&#x27;2012-11-11 15:00:00&#x27;,79),</span><br><span class="line">(1014,15,&#x27;2011-12-11 10:00:00&#x27;,73),</span><br><span class="line">(1014,16,&#x27;2010-09-11 10:00:00&#x27;,68),</span><br><span class="line">(1015,1,&#x27;2013-11-11 16:00:00&#x27;,99),</span><br><span class="line">(1015,2,&#x27;2012-11-10 10:00:00&#x27;,60),</span><br><span class="line">(1015,3,&#x27;2011-12-19 10:00:00&#x27;,60),</span><br><span class="line">(1015,4,&#x27;2010-11-18 11:00:00&#x27;,75),</span><br><span class="line">(1015,5,&#x27;2013-11-11 14:00:00&#x27;,78),</span><br><span class="line">(1015,6,&#x27;2012-09-13 15:00:00&#x27;,78),</span><br><span class="line">(1015,7,&#x27;2011-10-16 16:00:00&#x27;,84),</span><br><span class="line">(1015,8,&#x27;2010-11-11 16:00:00&#x27;,95),</span><br><span class="line">(1015,9,&#x27;2013-11-21 10:00:00&#x27;,93),</span><br><span class="line">(1015,10,&#x27;2012-11-11 12:00:00&#x27;,79),</span><br><span class="line">(1015,11,&#x27;2011-11-11 14:00:00&#x27;,74),</span><br><span class="line">(1015,12,&#x27;2010-11-11 15:00:00&#x27;,65),</span><br><span class="line">(1015,13,&#x27;2013-11-11 14:00:00&#x27;,63),</span><br><span class="line">(1015,14,&#x27;2012-11-11 15:00:00&#x27;,74),</span><br><span class="line">(1015,15,&#x27;2011-12-11 10:00:00&#x27;,67),</span><br><span class="line">(1015,16,&#x27;2010-09-11 10:00:00&#x27;,65),</span><br><span class="line">(1016,1,&#x27;2013-11-11 16:00:00&#x27;,97),</span><br><span class="line">(1016,2,&#x27;2012-11-10 10:00:00&#x27;,90),</span><br><span class="line">(1016,3,&#x27;2011-12-19 10:00:00&#x27;,77),</span><br><span class="line">(1016,4,&#x27;2010-11-18 11:00:00&#x27;,75),</span><br><span class="line">(1016,5,&#x27;2013-11-11 14:00:00&#x27;,75),</span><br><span class="line">(1016,6,&#x27;2012-09-13 15:00:00&#x27;,97),</span><br><span class="line">(1016,7,&#x27;2011-10-16 16:00:00&#x27;,96),</span><br><span class="line">(1016,8,&#x27;2010-11-11 16:00:00&#x27;,92),</span><br><span class="line">(1016,9,&#x27;2013-11-21 10:00:00&#x27;,62),</span><br><span class="line">(1016,10,&#x27;2012-11-11 12:00:00&#x27;,83),</span><br><span class="line">(1016,11,&#x27;2011-11-11 14:00:00&#x27;,98),</span><br><span class="line">(1016,12,&#x27;2010-11-11 15:00:00&#x27;,94),</span><br><span class="line">(1016,13,&#x27;2013-11-11 14:00:00&#x27;,62),</span><br><span class="line">(1016,14,&#x27;2012-11-11 15:00:00&#x27;,97),</span><br><span class="line">(1016,15,&#x27;2011-12-11 10:00:00&#x27;,76),</span><br><span class="line">(1016,16,&#x27;2010-09-11 10:00:00&#x27;,82),</span><br><span class="line">(1017,1,&#x27;2013-11-11 16:00:00&#x27;,100),</span><br><span class="line">(1017,2,&#x27;2012-11-10 10:00:00&#x27;,88),</span><br><span class="line">(1017,3,&#x27;2011-12-19 10:00:00&#x27;,86),</span><br><span class="line">(1017,4,&#x27;2010-11-18 11:00:00&#x27;,73),</span><br><span class="line">(1017,5,&#x27;2013-11-11 14:00:00&#x27;,96),</span><br><span class="line">(1017,6,&#x27;2012-09-13 15:00:00&#x27;,64),</span><br><span class="line">(1017,7,&#x27;2011-10-16 16:00:00&#x27;,81),</span><br><span class="line">(1017,8,&#x27;2010-11-11 16:00:00&#x27;,66),</span><br><span class="line">(1017,9,&#x27;2013-11-21 10:00:00&#x27;,76),</span><br><span class="line">(1017,10,&#x27;2012-11-11 12:00:00&#x27;,95),</span><br><span class="line">(1017,11,&#x27;2011-11-11 14:00:00&#x27;,73),</span><br><span class="line">(1017,12,&#x27;2010-11-11 15:00:00&#x27;,82),</span><br><span class="line">(1017,13,&#x27;2013-11-11 14:00:00&#x27;,85),</span><br><span class="line">(1017,14,&#x27;2012-11-11 15:00:00&#x27;,68),</span><br><span class="line">(1017,15,&#x27;2011-12-11 10:00:00&#x27;,99),</span><br><span class="line">(1017,16,&#x27;2010-09-11 10:00:00&#x27;,76);</span><br><span class="line"></span><br><span class="line">-- 插入年级数据</span><br><span class="line">insert into `grade` (`gradeid`,`gradename`) </span><br><span class="line">values(1,&#x27;大一&#x27;),(2,&#x27;大二&#x27;),(3,&#x27;大三&#x27;),</span><br><span class="line">(4,&#x27;大四&#x27;),(5,&#x27;预科班&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入科目数据</span><br><span class="line">insert into `subject`(`subjectno`,`subjectname`,`classhour`,`gradeid`)values</span><br><span class="line">(1,&#x27;高等数学-1&#x27;,110,1),</span><br><span class="line">(2,&#x27;高等数学-2&#x27;,110,2),</span><br><span class="line">(3,&#x27;高等数学-3&#x27;,100,3),</span><br><span class="line">(4,&#x27;高等数学-4&#x27;,130,4),</span><br><span class="line">(5,&#x27;C语言-1&#x27;,110,1),</span><br><span class="line">(6,&#x27;C语言-2&#x27;,110,2),</span><br><span class="line">(7,&#x27;C语言-3&#x27;,100,3),</span><br><span class="line">(8,&#x27;C语言-4&#x27;,130,4),</span><br><span class="line">(9,&#x27;JAVA第一学年&#x27;,110,1),</span><br><span class="line">(10,&#x27;JAVA第二学年&#x27;,110,2),</span><br><span class="line">(11,&#x27;JAVA第三学年&#x27;,100,3),</span><br><span class="line">(12,&#x27;JAVA第四学年&#x27;,130,4),</span><br><span class="line">(13,&#x27;数据库结构-1&#x27;,110,1),</span><br><span class="line">(14,&#x27;数据库结构-2&#x27;,110,2),</span><br><span class="line">(15,&#x27;数据库结构-3&#x27;,100,3),</span><br><span class="line">(16,&#x27;数据库结构-4&#x27;,130,4),</span><br><span class="line">(17,&#x27;C#基础&#x27;,130,1);</span><br></pre></td></tr></table></figure><h3 id="2-指定查询字段"><a href="#2-指定查询字段" class="headerlink" title="2.指定查询字段"></a>2.指定查询字段</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 查询表中所有的数据列结果 , 采用 **&quot; \* &quot;** 符号; 但是效率低，不推荐 .</span><br><span class="line"></span><br><span class="line">-- 查询所有学生信息</span><br><span class="line">SELECT * FROM student;</span><br><span class="line"></span><br><span class="line">-- 查询指定列(学号 , 姓名)</span><br><span class="line">SELECT studentno,studentname FROM student;</span><br></pre></td></tr></table></figure><blockquote><p>AS 子句作为别名</p></blockquote><p>作用：</p><ul><li>可给数据列取一个新别名；</li><li>可给表取一个新别名；</li><li>可把经计算或总结的结果用另一个新名称来代替；</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 这里是为列取别名(当然as关键词可以省略)</span><br><span class="line">SELECT studentno AS 学号,studentname AS 姓名 FROM student;</span><br><span class="line"></span><br><span class="line">-- 使用as也可以为表取别名</span><br><span class="line">SELECT studentno AS 学号,studentname AS 姓名 FROM student AS s;</span><br><span class="line"></span><br><span class="line">-- 使用as,为查询结果取一个新名字</span><br><span class="line">-- CONCAT()函数拼接字符串</span><br><span class="line">SELECT CONCAT(&#x27;姓名:&#x27;,studentname) AS 新姓名 FROM student;</span><br></pre></td></tr></table></figure><blockquote><p>DISTINCT关键字的使用</p></blockquote><ul><li>作用 : 去掉SELECT查询返回的记录结果中重复的数据 ( 返回所有列的值都相同 ) , 只返回一条。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查看哪些同学参加了考试(学号) 去除重复项</span><br><span class="line">SELECT * FROM result; -- 查看考试成绩</span><br><span class="line">SELECT studentno FROM result; -- 查看哪些同学参加了考试</span><br><span class="line">SELECT DISTINCT studentno FROM result; -- 了解:DISTINCT 去除重复项 , (默认是ALL)</span><br></pre></td></tr></table></figure><blockquote><p>数据库的列——(表达式)</p></blockquote><ul><li>数据库中的表达式 : 一般由文本值 , 列值 , NULL , 函数和操作符等组成。</li></ul><p>应用场景 :</p><ul><li><p>SELECT语句返回结果列中使用；</p></li><li><p>SELECT语句中的ORDER BY , HAVING等子句中使用；</p></li><li><p>DML语句中的 where 条件语句中使用表达式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- selcet查询中可以使用表达式</span><br><span class="line">SELECT VERSION(); -- 查询版本号</span><br><span class="line">SELECT 100*3-1 AS 计算结果; -- 表达式</span><br><span class="line">SELECT @@auto_increment_increment; -- 查询自增步长</span><br><span class="line"></span><br><span class="line">-- 学员考试成绩集体提分一分查看</span><br><span class="line">SELECT studentno,StudentResult+1 AS &#x27;提分后&#x27; FROM result;</span><br></pre></td></tr></table></figure></li><li><p>避免SQL返回结果中包含 ‘ . ‘ , ‘ * ‘ 和括号等干扰开发语言程序。</p></li></ul><h3 id="3-where条件语句"><a href="#3-where条件语句" class="headerlink" title="3.where条件语句"></a>3.where条件语句</h3><ul><li><p>作用：用于检索数据表中 <code>符合条件</code> 的记录。</p></li><li><p>搜索条件可由一个或多个逻辑表达式组成 , 结果一般为真或假。</p></li></ul><blockquote><p>逻辑运算符：<code>尽量使用英文符号</code>。</p></blockquote><table><thead><tr><th>操作符名称</th><th>语法</th><th>描述</th></tr></thead><tbody><tr><td>AND 或 &amp;&amp;</td><td>a AND b 或 a &amp;&amp; b</td><td>逻辑与，同时为真结果才为真</td></tr><tr><td>OR 或 ||</td><td>a OR b 或 a || b</td><td>逻辑或，只要一个为真，则结果为真</td></tr><tr><td>NOT 或 !</td><td>NOT a 或 !a</td><td>逻辑非，若操作数为假，则结果为真</td></tr></tbody></table><ul><li>测试</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- =============where===============</span><br><span class="line">SELECT studentno,studentResult FROM result;</span><br><span class="line"></span><br><span class="line">-- 查询考试成绩在95-100之间的</span><br><span class="line">SELECT studentno,studentresult</span><br><span class="line">FROM result</span><br><span class="line">WHERE studentresult&gt;=95 AND studentresult&lt;=100;</span><br><span class="line"></span><br><span class="line">-- AND也可以写成 &amp;&amp;</span><br><span class="line">SELECT studentno,studentresult</span><br><span class="line">FROM result </span><br><span class="line">WHERE studentresult&gt;=95 AND studentresult&lt;=100;</span><br><span class="line"></span><br><span class="line">-- 模糊查询(对应的词:精确查询)</span><br><span class="line">SELECT studentno,studentresult</span><br><span class="line">FROM result WHERE studentresult BETWEEN 95 AND 100;</span><br><span class="line"></span><br><span class="line">-- 除了1000号同学,要其他同学的成绩</span><br><span class="line">SELECT studentno,studentresult</span><br><span class="line">FROM result WHERE studentno!=1000;</span><br><span class="line"></span><br><span class="line">-- 使用NOT</span><br><span class="line">SELECT studentno,studentresult</span><br><span class="line">FROM result WHERE NOT studentno=1000;</span><br></pre></td></tr></table></figure><blockquote><p>模糊查询 ：比较运算符</p></blockquote><table><thead><tr><th>操作符名称</th><th>语法</th><th>描述</th></tr></thead><tbody><tr><td>IS NULL</td><td>a IS NULL</td><td>若操作符为NULL，则结果为真</td></tr><tr><td>IS NOT NULL</td><td>a IS NOT NULL</td><td>若操作符不为NULL，则结果为真</td></tr><tr><td>BETWEEN</td><td>a BETWEEN b AND c</td><td>若a范围在b与c之间，则结果为真</td></tr><tr><td>LIKE</td><td>a LIKE b</td><td>SQL模式匹配，若a匹配b，则结果为真</td></tr><tr><td>IN</td><td>a IN</td><td>若a等于a1，a2…中的某一个，则结果为真</td></tr></tbody></table><ul><li><p>注意：</p><ul><li>数值数据类型的记录之间才能进行算术运算 ;</li><li>相同数据类型的数据之间才能进行比较 ;</li></ul></li><li><p>测试：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-- ===================LIKE==========================</span><br><span class="line">-- 查询姓刘的同学的学号及姓名</span><br><span class="line">-- like结合使用的通配符 : % (代表0到任意个字符) _ (一个字符)</span><br><span class="line">SELECT studentno,studentname FROM student</span><br><span class="line">WHERE studentname LIKE &#x27;刘%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓刘的同学,后面只有一个字的</span><br><span class="line">SELECT studentno,studentname FROM student</span><br><span class="line">WHERE studentname LIKE &#x27;刘_&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓刘的同学,后面只有两个字的</span><br><span class="line">SELECT studentno,studentname FROM student</span><br><span class="line">WHERE studentname LIKE &#x27;刘__&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名中含有 梅 字的</span><br><span class="line">SELECT studentno,studentname FROM student</span><br><span class="line">WHERE studentname LIKE &#x27;%梅%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名中含有特殊字符的需要使用转义符号 &#x27;\&#x27;</span><br><span class="line">-- 自定义转义符关键字: ESCAPE &#x27;:&#x27;</span><br><span class="line"></span><br><span class="line">-- =====================IN========================</span><br><span class="line">-- 查询学号为1000,1001,1002的学生姓名</span><br><span class="line">SELECT studentno,studentname FROM student</span><br><span class="line">WHERE studentno IN (1000,1001,1002);</span><br><span class="line"></span><br><span class="line">-- 查询地址在北京,南京,河南洛阳的学生</span><br><span class="line">SELECT studentno,studentname,address FROM student</span><br><span class="line">WHERE address IN (&#x27;北京&#x27;,&#x27;南京&#x27;,&#x27;河南洛阳&#x27;);</span><br><span class="line"></span><br><span class="line">-- ====================NULL 空=========================</span><br><span class="line">-- 查询出生日期没有填写的同学</span><br><span class="line">-- 不能直接写=NULL , 这是代表错误的 , 用 is null</span><br><span class="line">SELECT studentname FROM student</span><br><span class="line">WHERE BornDate IS NULL;</span><br><span class="line"></span><br><span class="line">-- 查询出生日期填写的同学</span><br><span class="line">SELECT studentname FROM student</span><br><span class="line">WHERE BornDate IS NOT NULL;</span><br><span class="line"></span><br><span class="line">-- 查询没有写家庭住址的同学(空字符串不等于null)</span><br><span class="line">SELECT studentname FROM student</span><br><span class="line">WHERE Address=&#x27;&#x27; OR Address IS NULL;</span><br></pre></td></tr></table></figure><h3 id="4-联表查询"><a href="#4-联表查询" class="headerlink" title="4.联表查询"></a>4.联表查询</h3><blockquote><p>JOIN 对比</p></blockquote><table><thead><tr><th>操作符名称</th><th>描述</th></tr></thead><tbody><tr><td>INNER JOIN</td><td>如果表中有至少一个匹配，则返回行</td></tr><tr><td>LEFT JOIN</td><td>即使右表中没有匹配，也从左表中返回所有的行</td></tr><tr><td>RIGHT JOIN</td><td>即使左表中没有匹配，也从右表中返回所有的行</td></tr></tbody></table><ul><li>七种Join：</li></ul><p><img src="/../img/MySQL/4-4-01.jpg" alt="image-20210714095243197"></p><ul><li>连接查询<ul><li>如需要多张数据表的数据进行查询,则可通过连接运算符实现多个查询。</li></ul></li><li>内连接 inner join<ul><li>查询两个表中的结果集中的交集。</li></ul></li><li>外连接 outer join<ul><li>左外连接 left join——(以左表作为基准,右边表来一一匹配,匹配不上的,返回左表的记录,右表以NULL填充)。</li><li>右外连接 right join——(以右表作为基准,左边表来一一匹配,匹配不上的,返回右表的记录,左表以NULL填充)。</li></ul></li><li>等值连接和非等值连接。</li><li>自连接</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询参加了考试的同学信息(学号,学生姓名,科目编号,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*思路:</span></span><br><span class="line"><span class="comment">(1):分析需求,确定查询的列来源于两个类,student result,连接查询</span></span><br><span class="line"><span class="comment">(2):确定使用哪种连接查询?(内连接)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右连接(也可实现)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等值连接</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s , <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">WHERE</span> r.studentno <span class="operator">=</span> s.studentno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左连接 (查询了所有同学,不考试的也会查出来)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询缺考的同学(左连接应用场景)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">WHERE</span> StudentResult <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> sub.subjectno <span class="operator">=</span> r.subjectno;</span><br></pre></td></tr></table></figure><blockquote><p>自连接(了解！！)</p></blockquote><ul><li>自己的表与自己的表连接，核心：<code>一张表拆成两张一样的表</code>。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">需求:从一个包含栏目ID , 栏目名称和父栏目ID的表中</span><br><span class="line">    查询父栏目名称和其他子栏目名称</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 创建一个表</span><br><span class="line">CREATE TABLE `category` (</span><br><span class="line">`categoryid` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT &#x27;主题id&#x27;,</span><br><span class="line">`pid` INT(10) NOT NULL COMMENT &#x27;父id&#x27;,</span><br><span class="line">`categoryName` VARCHAR(50) NOT NULL COMMENT &#x27;主题名字&#x27;,</span><br><span class="line">PRIMARY KEY (`categoryid`)</span><br><span class="line">) ENGINE=INNODB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- 插入数据</span><br><span class="line">INSERT INTO `category` (`categoryid`, `pid`, `categoryName`)</span><br><span class="line">VALUES(&#x27;2&#x27;,&#x27;1&#x27;,&#x27;信息技术&#x27;),</span><br><span class="line">(&#x27;3&#x27;,&#x27;1&#x27;,&#x27;软件开发&#x27;),</span><br><span class="line">(&#x27;4&#x27;,&#x27;3&#x27;,&#x27;数据库&#x27;),</span><br><span class="line">(&#x27;5&#x27;,&#x27;1&#x27;,&#x27;美术设计&#x27;),</span><br><span class="line">(&#x27;6&#x27;,&#x27;3&#x27;,&#x27;web开发&#x27;),</span><br><span class="line">(&#x27;7&#x27;,&#x27;5&#x27;,&#x27;ps技术&#x27;),</span><br><span class="line">(&#x27;8&#x27;,&#x27;2&#x27;,&#x27;办公信息&#x27;);</span><br><span class="line"></span><br><span class="line">-- 编写SQL语句,将栏目的父子关系呈现出来 (父栏目名称,子栏目名称)</span><br><span class="line">-- 核心思想:把一张表看成两张一模一样的表,然后将这两张表连接查询(自连接)</span><br><span class="line">SELECT a.`categoryName` AS &#x27;父栏目&#x27;,b.`categoryName` AS &#x27;子栏目&#x27;</span><br><span class="line">FROM `category` AS a,`category` AS b</span><br><span class="line">WHERE a.`categoryid` = b.`pid`;</span><br><span class="line"></span><br><span class="line">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON sub.subjectno = r.subjectno;</span><br><span class="line"></span><br><span class="line">-- 查询学员及所属的年级(学号,学生姓名,年级名)</span><br><span class="line">SELECT studentno AS 学号,studentname AS 学生姓名,gradename AS 年级名称</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN grade g</span><br><span class="line">ON s.`GradeId` = g.`GradeID`;</span><br><span class="line"></span><br><span class="line">-- 查询科目及所属的年级(科目名称,年级名称)</span><br><span class="line">SELECT subjectname AS 科目名称,gradename AS 年级名称</span><br><span class="line">FROM SUBJECT sub</span><br><span class="line">INNER JOIN grade g</span><br><span class="line">ON sub.gradeid = g.gradeid;</span><br><span class="line"></span><br><span class="line">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.subjectno = sub.subjectno</span><br><span class="line">WHERE subjectname=&#x27;数据库结构-1&#x27;;</span><br></pre></td></tr></table></figure><h3 id="5-分页和排序"><a href="#5-分页和排序" class="headerlink" title="5.分页和排序"></a>5.分页和排序</h3><blockquote><p>排序——order by</p></blockquote><ul><li>语法 : <code>ORDER BY</code><ul><li>ORDER BY 语句用于根据指定的列对结果集进行排序。</li><li>ORDER BY 语句&#x3D;&#x3D;默认按照ASC升序对记录进行排序&#x3D;&#x3D;。</li><li>如果希望按照&#x3D;&#x3D;降序&#x3D;&#x3D;对记录进行排序，可以使用 <code>DESC</code> 关键字。</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span><br><span class="line">-- 按成绩降序排序</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.subjectno = sub.subjectno</span><br><span class="line">WHERE subjectname=&#x27;数据库结构-1&#x27;</span><br><span class="line">ORDER BY StudentResult DESC;</span><br><span class="line"></span><br><span class="line">-- 如果成绩一样，按其他规则排列，比如学号的升序与降序。</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.subjectno = sub.subjectno</span><br><span class="line">WHERE subjectname=&#x27;数据库结构-1&#x27;</span><br><span class="line">ORDER BY StudentResult DESC, studentno DESC;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORDER BY StudentResult, studentno DESC;</span><br></pre></td></tr></table></figure><ul><li>此处的正确理解是：成绩升序排列、学号降序排列。因为DESC是修饰studentno的，而StudentResult 是默认的。</li></ul><blockquote><p>分页——limit</p></blockquote><ul><li><p>语法 : <code>SELECT * FROM table LIMIT [offset,] rows | rows OFFSET offset</code>;</p></li><li><p>好处 : (用户体验,网络传输,查询压力)。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">推导:</span><br><span class="line">   第一页 : limit 0,5  (1-1)*5</span><br><span class="line">   第二页 : limit 5,5  (2-1)*5</span><br><span class="line">   第三页 : limit 10,5  (3-1)*5</span><br><span class="line">   ......</span><br><span class="line">   第N页 : limit (n-1)*pageSzie,pageSzie</span><br><span class="line">   [n:当前页码,pageSize:单页面显示条数]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- 需求：查询 数据库结构-1 的所有考试结果（学号 学生 科目名称 成绩),成绩</span><br><span class="line">-- 每页显示5条数据</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.subjectno = sub.subjectno</span><br><span class="line">WHERE subjectname=&#x27;数据库结构-1&#x27;</span><br><span class="line">ORDER BY StudentResult DESC , studentno</span><br><span class="line">LIMIT 0,5;</span><br><span class="line"></span><br><span class="line">-- 查询 JAVA第一学年 课程成绩前10名并且分数大于80的学生信息(学号,姓名,课程名,分数)</span><br><span class="line">SELECT s.studentno,studentname,subjectname,StudentResult</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON r.studentno = s.studentno</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.subjectno = sub.subjectno</span><br><span class="line">WHERE studentresult&gt;80 AND subjectname=&#x27;JAVA第一学年&#x27;</span><br><span class="line">ORDER BY StudentResult DESC</span><br><span class="line">LIMIT 0,10;</span><br></pre></td></tr></table></figure><h3 id="6-子查询"><a href="#6-子查询" class="headerlink" title="6.子查询"></a>6.子查询</h3><blockquote><p>什么是子查询?</p><ul><li>在查询语句中的WHERE条件子句中,又嵌套了另一个查询语句;</li><li>嵌套查询可由多个子查询组成,求解的方式是由里及外;</li><li>子查询返回的结果一般都是集合,故而建议使用IN关键字;</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 数据库结构-1 的所有考试结果(学号,科目编号,成绩),并且成绩降序排列</span><br><span class="line">-- 方法一:使用连接查询</span><br><span class="line">SELECT studentno,r.subjectno,StudentResult</span><br><span class="line">FROM result r</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON r.`SubjectNo`=sub.`SubjectNo`</span><br><span class="line">WHERE subjectname = &#x27;数据库结构-1&#x27;</span><br><span class="line">ORDER BY studentresult DESC;</span><br><span class="line"></span><br><span class="line">-- 方法二:使用子查询(执行顺序:由里及外)</span><br><span class="line">SELECT studentno,subjectno,StudentResult</span><br><span class="line">FROM result</span><br><span class="line">WHERE subjectno=(</span><br><span class="line">   SELECT subjectno FROM `subject`</span><br><span class="line">   WHERE subjectname = &#x27;数据库结构-1&#x27;</span><br><span class="line">)</span><br><span class="line">ORDER BY studentresult DESC;</span><br><span class="line"></span><br><span class="line">-- 查询课程为 高等数学-2 且分数不小于80分的学生的学号和姓名</span><br><span class="line">-- 方法一:使用连接查询</span><br><span class="line">SELECT s.studentno,studentname</span><br><span class="line">FROM student s</span><br><span class="line">INNER JOIN result r</span><br><span class="line">ON s.`StudentNo` = r.`StudentNo`</span><br><span class="line">INNER JOIN `subject` sub</span><br><span class="line">ON sub.`SubjectNo` = r.`SubjectNo`</span><br><span class="line">WHERE subjectname = &#x27;高等数学-2&#x27; AND StudentResult&gt;=80;</span><br><span class="line"></span><br><span class="line">-- 方法二:使用连接查询+子查询</span><br><span class="line">-- 分数不小于80分的学生的学号和姓名</span><br><span class="line">SELECT r.studentno,studentname FROM student s</span><br><span class="line">INNER JOIN result r ON s.`StudentNo`=r.`StudentNo`</span><br><span class="line">WHERE StudentResult&gt;=80;</span><br><span class="line"></span><br><span class="line">-- 在上面SQL基础上,添加需求:课程为 高等数学-2</span><br><span class="line">SELECT r.studentno,studentname FROM student s</span><br><span class="line">INNER JOIN result r ON s.`StudentNo`=r.`StudentNo`</span><br><span class="line">WHERE StudentResult&gt;=80 AND subjectno=(</span><br><span class="line">   SELECT subjectno FROM `subject`</span><br><span class="line">   WHERE subjectname = &#x27;高等数学-2&#x27;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 方法三:使用子查询</span><br><span class="line">-- 分步写简单sql语句,然后将其嵌套起来</span><br><span class="line">SELECT studentno,studentname FROM student WHERE studentno IN(</span><br><span class="line">   SELECT studentno FROM result WHERE StudentResult&gt;=80 AND subjectno=(</span><br><span class="line">       SELECT subjectno FROM `subject` WHERE subjectname = &#x27;高等数学-2&#x27;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>练习</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">题目:</span><br><span class="line">   查 C语言-1 的前5名学生的成绩信息(学号,姓名,分数)</span><br><span class="line">   使用子查询,查询郭靖同学所在的年级名称</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 需求：查询C语言-1的前5名学生的成绩信息：学号、姓名、分数</span><br><span class="line">-- 方式一：连接查询</span><br><span class="line">SELECT s.studentno,studentname,studentresult</span><br><span class="line">FROM student AS s</span><br><span class="line">INNER JOIN result AS r</span><br><span class="line">ON s.StudentNo=r.StudentNo</span><br><span class="line">INNER JOIN `subject` AS su</span><br><span class="line">ON r.SubjectNo=su.subjectno</span><br><span class="line">WHERE subjectname=&#x27;C语言-1&#x27;</span><br><span class="line">ORDER BY studentresult DESC</span><br><span class="line">LIMIT 0,5;</span><br><span class="line"></span><br><span class="line">-- 方式二：连接查询和子查询并用</span><br><span class="line">SELECT s.studentno,studentname,studentresult</span><br><span class="line">FROM student AS s</span><br><span class="line">INNER JOIN result AS r</span><br><span class="line">ON s.StudentNo=r.StudentNo</span><br><span class="line">WHERE subjectno=</span><br><span class="line">(SELECT subjectno FROM `subject` WHERE subjectname=&#x27;C语言-1&#x27;)</span><br><span class="line">ORDER BY studentresult DESC</span><br><span class="line">LIMIT 0,5;</span><br><span class="line"></span><br><span class="line">-- 使用子查询：查询郭靖同学所在的年级名称</span><br><span class="line">SELECT gradename FROM grade </span><br><span class="line">WHERE gradeid=</span><br><span class="line">(SELECT gradeid FROM student WHERE studentname=&#x27;郭靖&#x27;);</span><br></pre></td></tr></table></figure><h3 id="7-分组和过滤"><a href="#7-分组和过滤" class="headerlink" title="7.分组和过滤"></a>7.分组和过滤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 查询不同课程的平均分,最高分,最低分</span><br><span class="line">-- 前提:根据不同的课程进行分组</span><br><span class="line"></span><br><span class="line">SELECT subjectname,AVG(studentresult) AS 平均分,MAX(StudentResult) AS 最高分,MIN(StudentResult) AS 最低分</span><br><span class="line">FROM result AS r</span><br><span class="line">INNER JOIN `subject` AS s</span><br><span class="line">ON r.subjectno = s.subjectno</span><br><span class="line">GROUP BY r.subjectno</span><br><span class="line">HAVING 平均分&gt;80;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">where写在group by前面.</span><br><span class="line">要是放在分组后面的筛选</span><br><span class="line">要使用HAVING..</span><br><span class="line">因为having是从前面筛选的字段再筛选，而where是从数据表中的&gt;字段直接进行的筛选的</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="5-MySQL函数"><a href="#5-MySQL函数" class="headerlink" title="5.MySQL函数"></a>5.MySQL函数</h2><blockquote><p>官网：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/built-in-function-reference.html">链接</a></p></blockquote><h3 id="1-常用函数"><a href="#1-常用函数" class="headerlink" title="1.常用函数"></a>1.常用函数</h3><ul><li>数据函数</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT ABS(-8);	-- 绝对值函数</span><br><span class="line">SELECT CEILING(9.4); -- 向上取整/</span><br><span class="line">SELECT FLOOR(9.4);   -- 向下取整</span><br><span class="line">SELECT RAND();  -- 随机数,返回一个0-1之间的随机数</span><br><span class="line">SELECT SIGN(0); -- 符号函数: 负数返回-1,正数返回1,0返回0</span><br></pre></td></tr></table></figure><ul><li>字符串函数</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT CHAR_LENGTH(&#x27;Java坚持就能成功&#x27;); -- 返回字符串包含的字符数</span><br><span class="line">SELECT CONCAT(&#x27;我&#x27;,&#x27;改&#x27;,&#x27;程序&#x27;);  -- 合并字符串,参数可以有多个</span><br><span class="line">SELECT INSERT(&#x27;我在编程hello world&#x27;,1,2,&#x27;为了咸鱼&#x27;);  -- 替换字符串,从某个位置开始替换某个长度</span><br><span class="line">SELECT LOWER(&#x27;subeiLY&#x27;); -- 小写</span><br><span class="line">SELECT UPPER(&#x27;unremittingly&#x27;); -- 大写</span><br><span class="line">SELECT LEFT(&#x27;hello,world&#x27;,5);   -- 从左边截取</span><br><span class="line">SELECT RIGHT(&#x27;hello,world&#x27;,5);  -- 从右边截取</span><br><span class="line">SELECT REPLACE(&#x27;Java坚持就能成功&#x27;,&#x27;咸鱼&#x27;,&#x27;努力&#x27;);  -- 替换字符串</span><br><span class="line">SELECT SUBSTR(&#x27;Java坚持就能成功&#x27;,4,6); -- 截取字符串,开始和长度</span><br><span class="line">SELECT REVERSE(&#x27;Java坚持就能成功&#x27;); -- 反转</span><br><span class="line"> </span><br><span class="line">-- 查询姓郭的同学,改成邹</span><br><span class="line">SELECT REPLACE(studentname,&#x27;郭&#x27;,&#x27;邹&#x27;) AS 新名字</span><br><span class="line">FROM student WHERE studentname LIKE &#x27;郭%&#x27;;</span><br></pre></td></tr></table></figure><ul><li>日期和时间函数</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURRENT_DATE();   -- 获取当前日期</span><br><span class="line">SELECT CURDATE();   -- 获取当前日期</span><br><span class="line">SELECT NOW();   -- 获取当前日期和时间</span><br><span class="line">SELECT LOCALTIME();   -- 获取当前日期和时间</span><br><span class="line">SELECT SYSDATE();   -- 获取当前日期和时间</span><br><span class="line"></span><br><span class="line">-- 获取年月日,时分秒</span><br><span class="line">SELECT YEAR(NOW());</span><br><span class="line">SELECT MONTH(NOW());</span><br><span class="line">SELECT DAY(NOW());</span><br><span class="line">SELECT HOUR(NOW());</span><br><span class="line">SELECT MINUTE(NOW());</span><br><span class="line">SELECT SECOND(NOW());</span><br></pre></td></tr></table></figure><ul><li>系统信息函数</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();  -- 版本</span><br><span class="line">SELECT USER();     -- 用户 </span><br></pre></td></tr></table></figure><h3 id="2-聚合函数"><a href="#2-聚合函数" class="headerlink" title="2.聚合函数"></a>2.聚合函数</h3><table><thead><tr><th>函数名称</th><th>描述</th></tr></thead><tbody><tr><td>COUNT()</td><td>返回满足Select条件的记录总和数，如 select count(*) 【不建议使用 *，效率低】</td></tr><tr><td>SUM()</td><td>返回数字字段或表达式列作统计，返回一列的总和。</td></tr><tr><td>AVG()</td><td>通常为数值字段或表达列作统计，返回一列的平均值</td></tr><tr><td>MAX()</td><td>可以为数值字段，字符字段或表达式列作统计，返回最大的值。</td></tr><tr><td>MIN()</td><td>可以为数值字段，字符字段或表达式列作统计，返回最小的值。</td></tr></tbody></table><ul><li><p>从含义上讲，count(1) 与 count(*) 都表示对全部数据行的查询。</p><ul><li>count(字段) 会统计该字段在表中出现的次数，忽略字段为null 的情况。即不统计字段为null 的记录。</li><li>count(*) 包括了所有的列，相当于行数，在统计结果的时候，包含字段为null 的记录；</li><li>count(1) 用1代表代码行，在统计结果的时候，包含字段为null 的记录 。</li></ul></li></ul><blockquote><p>很多人认为count(1)执行的效率会比count(* )高，原因是count( * )会存在全表扫描，而count(1)可以针对一个字段进行查询。其实不然，count(1)和count(*)都会对全表进行扫描，统计所有记录的条数，包括那些为null的记录，因此，它们的效率可以说是相差无几。而count(字段)则与前两者不同，它会统计该字段不为null的记录条数。</p></blockquote><ul><li>两者之间的对比：<ul><li>1）在表没有主键时，count(1)比count(*)快；</li><li>2）有主键时，主键作为计算条件，count(主键)效率最高；</li><li>3）若表格只有一个字段，则count(*)效率较高。</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 聚合函数</span><br><span class="line">-- COUNT:非空的</span><br><span class="line">SELECT COUNT(studentname) FROM student; -- count(指定列</span><br><span class="line">SELECT COUNT(*) FROM student;  -- count(*)</span><br><span class="line">SELECT COUNT(1) FROM student;  -- count(1) 推荐</span><br><span class="line"></span><br><span class="line">SELECT SUM(StudentResult) AS 总和 FROM result;</span><br><span class="line">SELECT AVG(StudentResult) AS 平均分 FROM result;</span><br><span class="line">SELECT MAX(StudentResult) AS 最高分 FROM result;</span><br><span class="line">SELECT MIN(StudentResult) AS 最低分 FROM result;</span><br></pre></td></tr></table></figure><h3 id="3-数据库级别的MD5-加密"><a href="#3-数据库级别的MD5-加密" class="headerlink" title="3.数据库级别的MD5 加密"></a>3.数据库级别的MD5 加密</h3><blockquote><p><strong>一、什么是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MD5/212708">MD5</a>？</strong></p></blockquote><ul><li>主要增强算法复杂度和不可逆性。</li><li>MD5不可逆，具体的值的md5是一样的；</li><li>MD5破解网站的原理，背后有一个字典，MD5加密后的值，加密的前值。</li></ul><blockquote><p><strong>二、实现数据加密</strong></p></blockquote><ul><li>新建一个表 testmd5：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `testmd5` (</span><br><span class="line">`id` INT(4) NOT NULL,</span><br><span class="line">`name` VARCHAR(20) NOT NULL,</span><br><span class="line">`pwd` VARCHAR(50) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><ul><li>插入一些数据：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO testmd5 VALUES(1,&#x27;subei&#x27;,&#x27;123456&#x27;),(2,&#x27;wahaha&#x27;,&#x27;456789&#x27;);</span><br></pre></td></tr></table></figure><ul><li>如果我们要对pwd这一列数据进行加密，语法是：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update testmd5 set pwd = md5(pwd);</span><br></pre></td></tr></table></figure><ul><li>如果单独对某个用户(如wahaha)的密码加密：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO testmd5 VALUES(3,&#x27;admin&#x27;,&#x27;123456&#x27;);</span><br><span class="line"></span><br><span class="line">UPDATE testmd5 SET pwd = MD5(pwd) WHERE NAME=&#x27;admin&#x27;;</span><br></pre></td></tr></table></figure><ul><li>插入新的数据自动加密</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO testmd5 VALUES(4,&#x27;party&#x27;,md5(&#x27;123456&#x27;));</span><br></pre></td></tr></table></figure><ul><li>查询登录用户信息（md5对比使用，查看用户输入加密后的密码进行比对）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM testmd5 WHERE `name`=&#x27;subei&#x27; AND pwd=MD5(&#x27;123456&#x27;);</span><br></pre></td></tr></table></figure><h2 id="6-事务"><a href="#6-事务" class="headerlink" title="6.事务"></a>6.事务</h2><h3 id="1-什么是事务"><a href="#1-什么是事务" class="headerlink" title="1.什么是事务?"></a>1.什么是事务?</h3><ul><li><p>要么都成功，要么都失败。</p></li><li><p>事务就是将一组SQL语句放在同一批次内去执行；</p></li><li><p>如果一个SQL语句出错,则该批次内的所有SQL都将被取消执行；</p></li><li><p>MySQL事务处理只支持InnoDB和BDB数据表类型；</p></li></ul><blockquote><p>事务原则：ACID原则、原子性、一致性、隔离性、持久性。</p><p>参考博客链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/dengjili/article/details/82468576">https://blog.csdn.net/dengjili/article/details/82468576</a></p></blockquote><p><strong>原子性(Atomic)</strong></p><ul><li>整个事务中的所有操作，要么全部完成，要么全部不完成，不可能停滞在中间某个环节。事务在执行过程中发生错误，会被回滚（ROLLBACK）到事务开始前的状态，就像这个事务从来没有执行过一样。</li></ul><p><strong>一致性(Consist)</strong></p><ul><li>一个事务可以封装状态改变（除非它是一个只读的）。&#x3D;&#x3D;事务必须始终保持系统处于一致的状态，不管在任何给定的时间并发事务有多少&#x3D;&#x3D;。</li><li>也就是说：如果事务是并发多个，系统也必须如同串行事务一样操作。其主要特征是保护性和不变性(Preserving an Invariant)，以转账案例为例，假设有五个账户，每个账户余额是100元，那么五个账户总额是500元，如果在这个5个账户之间同时发生多个转账，无论并发多少个，比如在A与B账户之间转账5元，在C与D账户之间转账10元，在B与E之间转账15元，五个账户总额也应该还是500元，这就是保护性和不变性。</li></ul><p><strong>持久性(Durable)</strong></p><ul><li>在事务完成以后，该事务对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。</li></ul><p><strong>隔离性(Isolated)</strong></p><ul><li>隔离状态执行事务，使它们好像是系统在给定时间内执行的唯一操作。如果有两个事务，运行在相同的时间内，执行相同的功能，事务的隔离性将确保每一事务在系统中认为只有该事务在使用系统。这种属性有时称为<code>串行化</code>，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求用于同一数据。</li></ul><blockquote><p>隔离所导致的一些问题：</p><ul><li>脏读：指一个事务读取了另外一个事务未提交的数据。</li><li>不可重复读：在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）。</li><li>虚读(幻读)：是指在一个事务内读取到了别的事务插入的数据，导致前后读取数量总量不一致。</li></ul></blockquote><h3 id="2-执行事务"><a href="#2-执行事务" class="headerlink" title="2.执行事务"></a>2.执行事务</h3><ul><li>注意:<ol><li>MySQL中默认是自动提交；</li><li><code>使用事务时应先关闭自动提交</code>。</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- ==========事务==========</span><br><span class="line"></span><br><span class="line">-- MySQL默认开启事务的</span><br><span class="line">SET autocommit = 0;   -- 关闭</span><br><span class="line">SET autocommit = 1;   -- 开启(默认的)</span><br><span class="line"></span><br><span class="line">-- 手动处理事务</span><br><span class="line"></span><br><span class="line">-- 事务开启</span><br><span class="line">START TRANSACTION;  -- 开始一个事务,标记事务的起始点</span><br><span class="line"></span><br><span class="line">INSERT XX</span><br><span class="line">INSERT XX</span><br><span class="line"></span><br><span class="line">-- 提交:持久化</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- 回滚:数据回到本次事务的初始状态</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 事务结束</span><br><span class="line">SET autocommit =1;  -- 开始自动提交</span><br><span class="line"></span><br><span class="line">-- 保存点</span><br><span class="line">SAVEPOINT 保存点名称; -- 设置一个事务保存点</span><br><span class="line">ROLLBACK TO SAVEPOINT 保存点名称; -- 回滚到保存点</span><br><span class="line">RELEASE SAVEPOINT 保存点名称; -- 删除保存点</span><br></pre></td></tr></table></figure><blockquote><p>测试</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">题目：</span><br><span class="line">	A在线买一款价格为500元商品,网上银行转账.</span><br><span class="line">	A的银行卡余额为2000,然后给商家B支付500.</span><br><span class="line">	商家B一开始的银行卡余额为10000</span><br><span class="line">	</span><br><span class="line">	创建数据库shop和创建表account并插入2条数据</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">CREATE DATABASE `shop`CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line">USE `shop`;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `account` (</span><br><span class="line">`id` INT(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` VARCHAR(32) NOT NULL,</span><br><span class="line">`money` DECIMAL(9,2) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO account (`name`,`money`)</span><br><span class="line">VALUES(&#x27;A&#x27;,2000.00),(&#x27;B&#x27;,10000.00);</span><br><span class="line"></span><br><span class="line">-- 模拟转账</span><br><span class="line">SET autocommit = 0; -- 关闭自动提交</span><br><span class="line">START TRANSACTION;  -- 开始一个事务</span><br><span class="line"></span><br><span class="line">UPDATE account SET money=money-500 WHERE `name`=&#x27;A&#x27;;</span><br><span class="line">UPDATE account SET money=money+500 WHERE `name`=&#x27;B&#x27;;</span><br><span class="line"></span><br><span class="line">COMMIT; -- 提交事务，持久化了！！！</span><br><span class="line"># rollback; -- 回滚</span><br><span class="line">SET autocommit = 1; -- 恢复自动提交</span><br></pre></td></tr></table></figure><h2 id="7-索引"><a href="#7-索引" class="headerlink" title="7.索引"></a>7.索引</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h3><blockquote><p>MySQL官方对索引的定义为：<strong>索引（index）是帮助 MysQL高效获取数据的数据结构</strong>。</p><p>提取句子主千，就可以得到索引的本质：索引是数据结构。</p></blockquote><blockquote><p>索引的作用：</p></blockquote><ul><li>提高查询速度；</li><li>确保数据的唯一性；</li><li>可以加速表和表之间的连接 , 实现表与表之间的参照完整性；</li><li>使用分组和排序子句进行数据检索时 , 可以显著减少分组和排序的时间；</li><li>全文检索字段进行搜索优化。</li></ul><h3 id="2-索引的分类"><a href="#2-索引的分类" class="headerlink" title="2.索引的分类"></a>2.索引的分类</h3><ul><li><p>主键索引 (Primary Key)</p><ul><li>唯一的标识，主键不可重复，只能有一个列作为主键。</li></ul></li><li><p>唯一索引 (Unique)</p><ul><li>避免重复的列出现，唯一索引可以重复，多个列都可以标识唯一索引。</li></ul></li><li><p>常规索引 (Index)</p><ul><li>默认的，key关键字来设置。</li></ul></li><li><p>全文索引 (FullText)</p><ul><li>在特定引擎下才可以实现，MyISAM。<ul><li>MySQL 5.6 以前的版本，只有 MyISAM 存储引擎支持全文索引；</li><li>MySQL 5.6 及以后的版本，MyISAM 和 InnoDB 存储引擎均支持全文索引;</li><li>只有字段的数据类型为 char、varchar、text 及其系列才可以建全文索引。</li><li>测试或使用全文索引时，要先看一下自己的 MySQL 版本、存储引擎和数据类型是否支持全文索引。</li></ul></li><li>快速定位数据。</li></ul></li><li><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#方法一：创建表时</span><br><span class="line">  　　CREATE TABLE 表名 (</span><br><span class="line">               字段名1 数据类型 [完整性约束条件…],</span><br><span class="line">               字段名2 数据类型 [完整性约束条件…],</span><br><span class="line">               [UNIQUE | FULLTEXT | SPATIAL ]   INDEX | KEY</span><br><span class="line">               [索引名] (字段名[(长度)] [ASC |DESC])</span><br><span class="line">               );</span><br><span class="line"></span><br><span class="line">#方法二：CREATE在已存在的表上创建索引</span><br><span class="line">       CREATE [UNIQUE | FULLTEXT | SPATIAL ] INDEX 索引名</span><br><span class="line">                    ON 表名 (字段名[(长度)] [ASC |DESC]) ;</span><br><span class="line"></span><br><span class="line">#方法三：ALTER TABLE在已存在的表上创建索引</span><br><span class="line">       ALTER TABLE 表名 ADD [UNIQUE | FULLTEXT | SPATIAL ] INDEX</span><br><span class="line">                            索引名 (字段名[(长度)] [ASC |DESC]) ;</span><br><span class="line">                           </span><br><span class="line">                           </span><br><span class="line">#删除索引：DROP INDEX 索引名 ON 表名字;</span><br><span class="line">#删除主键索引: ALTER TABLE 表名 DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 索引的使用</span><br><span class="line">-- 1.在创建表时给字段增加索引</span><br><span class="line">-- 2.创建完毕后，增加索引</span><br><span class="line"></span><br><span class="line">-- 显示所有的索引信息</span><br><span class="line">SHOW INDEX FROM student;</span><br><span class="line"></span><br><span class="line">-- 增加全文索引</span><br><span class="line">ALTER TABLE `school`.`student` ADD FULLTEXT INDEX `studentname` (`studentname`);</span><br><span class="line"></span><br><span class="line">-- EXPLAIN : 分析SQL语句执行性能</span><br><span class="line">EXPLAIN SELECT * FROM student;  -- 非全文索引</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * FROM student WHERE MATCH(`studentname`) AGAINST(&#x27;张&#x27;);</span><br></pre></td></tr></table></figure><blockquote><p>报错：#1292 – Incorrect datetime value: ‘0000-00-00 00:00:00’ 原因与解决方法：</p></blockquote><ul><li><p>原因：</p></li><li><p>当前的MySQL模式不支持datetime为0的情况。</p></li><li><p>解决方法：只需要直接修改“sql_mode”即可！以Mysql5.7版本为例子，具体解决方法如下：</p><ol><li><p>在MySQL配置文件my.ini 的 [mysqld] 下添加：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sql_mode</span>=<span class="literal">ON</span>LY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure></li><li><p>重启MySQL。</p></li></ol></li></ul><h3 id="3-测试索引"><a href="#3-测试索引" class="headerlink" title="3.测试索引"></a>3.测试索引</h3><ul><li>建表app_user：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `app_user` (</span><br><span class="line">`id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` VARCHAR(50) DEFAULT&#x27;&#x27; COMMENT&#x27;用户昵称&#x27;,</span><br><span class="line">`email` VARCHAR(50) NOT NULL COMMENT&#x27;用户邮箱&#x27;,</span><br><span class="line">`phone` VARCHAR(20) DEFAULT&#x27;&#x27; COMMENT&#x27;手机号&#x27;,</span><br><span class="line">`gender` TINYINT(4) UNSIGNED DEFAULT &#x27;0&#x27;COMMENT &#x27;性别（0：男;1:女）&#x27;,</span><br><span class="line">`password` VARCHAR(100) NOT NULL COMMENT &#x27;密码&#x27;,</span><br><span class="line">`age` TINYINT(4) DEFAULT&#x27;0&#x27;  COMMENT &#x27;年龄&#x27;,</span><br><span class="line">`create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">`update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT = &#x27;app用户表&#x27;;</span><br></pre></td></tr></table></figure><ul><li>批量插入数据：100w</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 插入百万条数据</span><br><span class="line">DROP FUNCTION IF EXISTS mock_data;</span><br><span class="line"></span><br><span class="line">DELIMITER $$ -- 写函数之前必须写，标志</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION mock_data()</span><br><span class="line">RETURNS INT</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE num INT DEFAULT 1000000;</span><br><span class="line">    DECLARE i INT DEFAULT 0;</span><br><span class="line">    WHILE i &lt; num DO</span><br><span class="line">	-- 插入语句</span><br><span class="line">	INSERT INTO app_user(`name`, `email`, `phone`, `gender`, `password`, `age`)</span><br><span class="line">	VALUES(CONCAT(&#x27;用户&#x27;, i), &#x27;24736743@qq.com&#x27;, CONCAT(&#x27;18&#x27;, FLOOR(RAND()*(999999999-100000000)+100000000)),FLOOR(RAND()*2),UUID(), FLOOR(RAND()*100));</span><br><span class="line">	SET i = i + 1;</span><br><span class="line">    END WHILE;</span><br><span class="line">    RETURN i;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">SELECT mock_data();</span><br></pre></td></tr></table></figure><p><strong>索引效率测试</strong></p><ul><li>无索引</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM app_user WHERE NAME = &#x27;用户9999&#x27;; -- 查看耗时</span><br><span class="line">SELECT * FROM app_user WHERE NAME = &#x27;用户9999&#x27;;</span><br><span class="line">SELECT * FROM app_user WHERE NAME = &#x27;用户9999&#x27;;</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * FROM app_user WHERE NAME = &#x27;用户9999&#x27;;</span><br></pre></td></tr></table></figure><ul><li>创建索引</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- CREATE INDEX 索引名 ON 表(字段)</span><br><span class="line">CREATE INDEX id_app_user_name ON app_user(`name`);</span><br></pre></td></tr></table></figure><ul><li>测试普通索引</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM app_user WHERE NAME = &#x27;用户9999&#x27;;</span><br></pre></td></tr></table></figure><h3 id="4-索引原则"><a href="#4-索引原则" class="headerlink" title="4.索引原则"></a>4.索引原则</h3><ul><li>索引不是越多越好；</li><li>不要对经常变动的数据加索引；</li><li>小数据量的表建议不要加索引；</li><li>索引一般应加在查找条件的字段。</li></ul><blockquote><p>索引的数据结构，<a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">参考博文</a></p></blockquote><ul><li>在创建上述索引的时候，为其指定索引类型，分两类：<ul><li>hash类型的索引：查询单条快，范围查询慢；</li><li>btree类型的索引：b+树，层数越多，数据量指数级增长（我们就用它，因为innodb默认支持它）。</li></ul></li><li>不同的存储引擎支持的索引类型也不一样：<ul><li>InnoDB 支持事务，支持行级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引；</li><li>MyISAM 不支持事务，支持表级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引；</li><li>Memory 不支持事务，支持表级别锁定，支持 B-tree、Hash 等索引，不支持 Full-text 索引；</li><li>NDB 支持事务，支持行级别锁定，支持 Hash 索引，不支持 B-tree、Full-text 等索引；</li><li>Archive 不支持事务，支持表级别锁定，不支持 B-tree、Hash、Full-text 等索引；</li></ul></li></ul><h2 id="8-权限管理及备份"><a href="#8-权限管理及备份" class="headerlink" title="8.权限管理及备份"></a>8.权限管理及备份</h2><h3 id="1-用户管理"><a href="#1-用户管理" class="headerlink" title="1.用户管理"></a>1.用户管理</h3><blockquote><p>使用SQLyog 创建用户，并授予权限。</p></blockquote><p><img src="/../img/MySQL/image-20210714140446082.png" alt="image-20210714140446082"></p><blockquote><p>SQL命令操作</p></blockquote><ul><li>用户表：mysql.user</li><li>本质：对这张表进行增删改查。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">-- 刷新权限</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line">-- 增加用户 </span><br><span class="line">CREATE USER subei IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">CREATE USER 用户名 IDENTIFIED BY [PASSWORD] 密码(字符串)</span><br><span class="line">  - 必须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限。</span><br><span class="line">  - 只能创建用户，不能赋予权限。</span><br><span class="line">  - 用户名，注意引号：如 &#x27;user_name&#x27;@&#x27;192.168.1.1&#x27;</span><br><span class="line">  - 密码也需引号，纯数字密码也要加引号</span><br><span class="line">  - 要在纯文本中指定密码，需忽略PASSWORD关键词。要把密码指定为由PASSWORD()函数返回的混编值，需包含关键字PASSWORD</span><br><span class="line"></span><br><span class="line">-- 重命名用户 </span><br><span class="line">RENAME USER subei TO subei2;</span><br><span class="line">RENAME USER old_user TO new_user;</span><br><span class="line"></span><br><span class="line">-- 设置密码</span><br><span class="line">SET PASSWORD = PASSWORD(&#x27;admin&#x27;);</span><br><span class="line">SET PASSWORD = PASSWORD(&#x27;密码&#x27;);    -- 为当前用户设置密码</span><br><span class="line">SET PASSWORD FOR 用户名 = PASSWORD(&#x27;密码&#x27;);    -- 为指定用户设置密码</span><br><span class="line"></span><br><span class="line">-- 删除用户 </span><br><span class="line">DROP USER subei2;</span><br><span class="line">DROP USER 用户名;</span><br><span class="line"></span><br><span class="line">-- 分配权限/添加用户</span><br><span class="line">GRANT all privileges ON *.* TO subei2;</span><br><span class="line">GRANT 权限列表 ON 表名 TO 用户名 [IDENTIFIED BY [PASSWORD] &#x27;password&#x27;]</span><br><span class="line">  - all privileges 表示所有权限</span><br><span class="line">  - *.* 表示所有库的所有表</span><br><span class="line">  - 库名.表名 表示某库下面的某表  </span><br><span class="line"></span><br><span class="line">-- 查看权限   </span><br><span class="line">SHOW GRANTS FOR root@localhost;</span><br><span class="line">SHOW GRANTS FOR 用户名</span><br><span class="line">   -- 查看当前用户权限</span><br><span class="line">  SHOW GRANTS; 或 SHOW GRANTS FOR CURRENT_USER; 或 SHOW GRANTS FOR CURRENT_USER();</span><br><span class="line"></span><br><span class="line">-- 撤消权限</span><br><span class="line">REVOKE 权限列表 ON 表名 FROM 用户名</span><br><span class="line">REVOKE ALL PRIVILEGES, GRANT OPTION FROM 用户名    -- 撤销所有权限</span><br></pre></td></tr></table></figure><blockquote><p>权限解释</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- 权限列表</span><br><span class="line">ALL [PRIVILEGES]    -- 设置除GRANT OPTION之外的所有简单权限</span><br><span class="line">ALTER    -- 允许使用ALTER TABLE</span><br><span class="line">ALTER ROUTINE    -- 更改或取消已存储的子程序</span><br><span class="line">CREATE    -- 允许使用CREATE TABLE</span><br><span class="line">CREATE ROUTINE    -- 创建已存储的子程序</span><br><span class="line">CREATE TEMPORARY TABLES        -- 允许使用CREATE TEMPORARY TABLE</span><br><span class="line">CREATE USER        -- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</span><br><span class="line">CREATE VIEW        -- 允许使用CREATE VIEW</span><br><span class="line">DELETE    -- 允许使用DELETE</span><br><span class="line">DROP    -- 允许使用DROP TABLE</span><br><span class="line">EXECUTE        -- 允许用户运行已存储的子程序</span><br><span class="line">FILE    -- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</span><br><span class="line">INDEX     -- 允许使用CREATE INDEX和DROP INDEX</span><br><span class="line">INSERT    -- 允许使用INSERT</span><br><span class="line">LOCK TABLES        -- 允许对您拥有SELECT权限的表使用LOCK TABLES</span><br><span class="line">PROCESS     -- 允许使用SHOW FULL PROCESSLIST</span><br><span class="line">REFERENCES    -- 未被实施</span><br><span class="line">RELOAD    -- 允许使用FLUSH</span><br><span class="line">REPLICATION CLIENT    -- 允许用户询问从属服务器或主服务器的地址</span><br><span class="line">REPLICATION SLAVE    -- 用于复制型从属服务器（从主服务器中读取二进制日志事件）</span><br><span class="line">SELECT    -- 允许使用SELECT</span><br><span class="line">SHOW DATABASES    -- 显示所有数据库</span><br><span class="line">SHOW VIEW    -- 允许使用SHOW CREATE VIEW</span><br><span class="line">SHUTDOWN    -- 允许使用mysqladmin shutdown</span><br><span class="line">SUPER    -- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</span><br><span class="line">UPDATE    -- 允许使用UPDATE</span><br><span class="line">USAGE    -- “无权限”的同义词</span><br><span class="line">GRANT OPTION    -- 允许授予权限</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 表维护</span><br><span class="line"></span><br><span class="line">-- 分析和存储表的关键字分布</span><br><span class="line">ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE 表名 ...</span><br><span class="line">-- 检查一个或多个表是否有错误</span><br><span class="line">CHECK TABLE tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">option = &#123;QUICK | FAST | MEDIUM | EXTENDED | CHANGED&#125;</span><br><span class="line">-- 整理数据文件的碎片</span><br><span class="line">OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure><h3 id="2-MySQL备份"><a href="#2-MySQL备份" class="headerlink" title="2.MySQL备份"></a>2.MySQL备份</h3><p>数据库备份必要性：</p><ul><li>保证重要数据不丢失；</li><li>数据转移；</li></ul><p>MySQL数据库备份方法：</p><ul><li>mysqldump备份工具；</li><li>数据库管理工具，如SQLyog；</li></ul><p><img src="/../img/MySQL/image-20210716115304829.png" alt="image-20210716115304829"></p><ul><li>直接拷贝数据库文件和相关配置文件；</li></ul><p><strong>mysqldump客户端</strong></p><p>作用 :</p><ul><li>转储数据库；</li><li>搜集数据库进行备份；</li><li>将数据转移到另一个SQL服务器,不一定是MySQL服务器。</li></ul><p><img src="/../img/MySQL/image-20210714140327548.png" alt="image-20210714140327548"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- 导出</span><br><span class="line">1. 导出一张表 </span><br><span class="line">-- mysqldump -uroot -proot school student &gt;D:/a.sql</span><br><span class="line">　　mysqldump -h 主机 -u用户名 -p密码 库名 表名 &gt; 文件名(D:/a.sql)</span><br><span class="line">2. 导出多张表 </span><br><span class="line">-- mysqldump -uroot -proot school student result &gt;D:/b.sql</span><br><span class="line">　　mysqldump -h 主机 -u用户名 -p密码 库名 表1 表2 表3 &gt; 文件名(D:/b.sql)</span><br><span class="line">3. 导出所有表 </span><br><span class="line">-- mysqldump -uroot -proot school &gt;D:/c.sql</span><br><span class="line">　　mysqldump -h 主机 -u用户名 -p密码 库名 &gt; 文件名(D:/c.sql)</span><br><span class="line">4. 导出一个库 </span><br><span class="line">-- mysqldump -uroot -proot -B school &gt;D:/d.sql</span><br><span class="line">　　mysqldump -h 主机 -u用户名 -p密码 -B 库名 &gt; 文件名(D:/d.sql)</span><br><span class="line"></span><br><span class="line">可以-w携带备份条件</span><br><span class="line"></span><br><span class="line">-- 导入</span><br><span class="line">1. 在登录mysql的情况下：</span><br><span class="line">-- source D:/a.sql</span><br><span class="line">　　source 备份文件</span><br><span class="line">2. 在不登录的情况下:</span><br><span class="line">　　mysql -u用户名 -p密码 库名 &lt; 备份文件</span><br></pre></td></tr></table></figure><p><img src="/../img/MySQL/image-20210716130407790.png" alt="image-20210716130407790"></p><h2 id="9-规范化数据库设计"><a href="#9-规范化数据库设计" class="headerlink" title="9.规范化数据库设计"></a>9.规范化数据库设计</h2><h3 id="1-为什么需要数据库设计"><a href="#1-为什么需要数据库设计" class="headerlink" title="1.为什么需要数据库设计"></a>1.为什么需要数据库设计</h3><p><strong>当数据库比较复杂时我们需要设计数据库</strong>。</p><p><strong>糟糕的数据库设计 :</strong></p><ul><li>数据冗余,存储空间浪费；</li><li>数据更新和插入的异常【屏蔽使用物理外键】；</li><li>程序性能差；</li></ul><p><strong>良好的数据库设计 :</strong></p><ul><li>节省数据的存储空间；</li><li>能够保证数据的完整性；</li><li>方便进行数据库应用系统的开发；</li></ul><p><strong>软件项目开发周期中数据库设计 :</strong></p><ul><li>需求分析阶段: 分析客户的业务和数据处理需求；</li><li>概要设计阶段:设计数据库的E-R模型图 , 确认需求信息的正确和完整。</li></ul><p><strong>设计数据库步骤</strong>：</p><ul><li>分析需求：分析业务和需要处理的数据库的需求；</li><li>概要设计：设计关系E-R图；</li></ul><hr><ul><li>收集信息</li><li>与该系统有关人员进行交流 , 座谈 , 充分了解用户需求 , 理解数据库需要完成的任务.</li><li>标识实体[Entity]<ul><li>标识数据库要管理的关键对象或实体,实体一般是名词；</li><li>标识每个实体需要存储的详细信息[Attribute]；</li><li>标识实体之间的关系[Relationship]。</li></ul></li></ul><h3 id="2-三大范式"><a href="#2-三大范式" class="headerlink" title="2.三大范式"></a>2.三大范式</h3><p><strong>问题 : 为什么需要数据规范化?</strong></p><p>不合规范的表设计会导致的问题：</p><ul><li><p>信息重复</p></li><li><p>更新异常</p></li><li><p>插入异常</p><ul><li>无法正确表示信息</li></ul></li><li><p>删除异常</p><ul><li>丢失有效信息</li></ul></li></ul><blockquote><p>三大范式</p></blockquote><p><strong>第一范式 (1NF)</strong></p><ul><li>第一范式的目标是确保每列的原子性，如果每列都是不可再分的最小数据单元，则满足第一范式。</li></ul><p><strong>第二范式(2NF)</strong></p><ul><li><p>第二范式（2NF）是在第一范式（1NF）的基础上建立起来的，即满足第二范式（2NF）必须先满足第一范式（1NF）。</p></li><li><p>第二范式要求每个表只描述一件事情。</p></li></ul><p><strong>第三范式(3NF)</strong></p><ul><li><p>如果一个关系满足第二范式,并且除了主键以外的其他列都不传递依赖于主键列,则满足第三范式。</p></li><li><p>第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</p></li></ul><p><strong>规范化和性能的关系</strong></p><ul><li>为满足某种商业目标 , 数据库性能比规范化数据库更重要；</li><li>在数据规范化的同时 , 要综合考虑数据库的性能；</li><li>通过在给定的表中添加额外的字段,以大量减少需要从中搜索信息所需的时间；</li><li>通过在给定的表中插入计算列,以方便查询。</li></ul><h2 id="10-JDBC"><a href="#10-JDBC" class="headerlink" title="10.JDBC"></a>10.JDBC</h2><h3 id="1-数据库驱动"><a href="#1-数据库驱动" class="headerlink" title="1.数据库驱动"></a>1.数据库驱动</h3><blockquote><p>这里的驱动的概念和平时听到的那种驱动的概念是一样的，比如平时购买的声卡，网卡直接插到计算机上面是不能用的，必须要安装相应的驱动程序之后才能够使用声卡和网卡，同样道理，我们安装好数据库之后，我们的应用程序也是不能直接使用数据库的，必须要通过相应的数据库驱动程序，通过驱动程 序去和数据库打交道，如下所示：</p></blockquote><p><img src="/../img/JDBC/image-20210716184500603.png" alt="image-20210716184500603"></p><h3 id="2-JDBC介绍"><a href="#2-JDBC介绍" class="headerlink" title="2.JDBC介绍"></a>2.JDBC介绍</h3><blockquote><p>SUN公司为了简化、统一对数据库的操作，定义了一套Java操作数据库的规范（接口），称之为JDBC。 这套接口由数据库厂商去实现，这样，开发人员只需要学习jdbc接口，并通过jdbc加载具体的驱动，就 可以操作数据库。</p></blockquote><ul><li>如下图所示：</li></ul><p><img src="/../img/JDBC/image-20210716184657003.png" alt="image-20210716184657003"></p><ul><li>JDBC全称为：Java Data Base Connectivity（java数据库连接），它主要由接口组成。</li><li>组成JDBC的２个包：java.sql、javax.sql</li><li>开发JDBC应用需要以上2个包的支持外，还需要导入相应JDBC的数据库实现(即数据库驱动包—mysql-connector-java-5.1.47.jar)。</li></ul><h3 id="3-第一个JDBC程序"><a href="#3-第一个JDBC程序" class="headerlink" title="3.第一个JDBC程序"></a>3.第一个JDBC程序</h3><blockquote><p>搭建实验环境</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE jdbcStudy CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line">USE jdbcStudy;</span><br><span class="line">CREATE TABLE users(</span><br><span class="line">id INT PRIMARY KEY,</span><br><span class="line">NAME VARCHAR(40),</span><br><span class="line">PASSWORD VARCHAR(40),</span><br><span class="line">email VARCHAR(60),</span><br><span class="line">birthday DATE</span><br><span class="line">);</span><br><span class="line">INSERT INTO users(id,NAME,PASSWORD,email,birthday)</span><br><span class="line">VALUES(1,&#x27;zhansan&#x27;,&#x27;123456&#x27;,&#x27;zs@sina.com&#x27;,&#x27;1980-12-04&#x27;),</span><br><span class="line">(2,&#x27;lisi&#x27;,&#x27;123456&#x27;,&#x27;lisi@sina.com&#x27;,&#x27;1981-12-04&#x27;),</span><br><span class="line">(3,&#x27;wangwu&#x27;,&#x27;123456&#x27;,&#x27;wangwu@sina.com&#x27;,&#x27;1979-12-04&#x27;);</span><br></pre></td></tr></table></figure><blockquote><p>新建一个Java工程，并导入数据驱动。</p><p>jar包下载地址：<a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.47">maven仓库</a>。</p></blockquote><p><img src="/../img/JDBC/image-20210717075205960.png" alt="image-20210717075205960"></p><p><img src="/../img/JDBC/image-20210716193027653.png" alt="image-20210716193027653"></p><blockquote><p>编写程序从user表中读取数据，并打印在命令行窗口中。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第一个JDBC程序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcFirstDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">// 1.加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>); <span class="comment">// 固定写法，加载驱动</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.用户信息和url</span></span><br><span class="line">        <span class="comment">// uesUnicode=true 支持中文编码</span></span><br><span class="line">        <span class="comment">// characterEncoding=utf8 设定字符集</span></span><br><span class="line">        <span class="comment">// useSSL=true 使用安全的连接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcStudy?uesUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.连接成功，数据库对象 connection 代表数据库</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.执行SQL对象</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.执行SQL对象，执行SQL</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);  <span class="comment">// 返回结果集,结果集中封装了我们全部查询出来的对象</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;id=&quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;name=&quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;pwd=&quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;email=&quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;both=&quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.释放连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>步骤总结：</p><ol><li>加载驱动；</li><li>连接数据库 DriverManager；</li><li>获得执行SQL的对象 Statement；</li><li>获得返回的结果集；</li><li>释放连接。</li></ol><h3 id="4-对象说明"><a href="#4-对象说明" class="headerlink" title="4.对象说明"></a>4.对象说明</h3><blockquote><p>DriverManager</p></blockquote><ul><li>JDBC程序中的DriverManager用于加载驱动，并创建与数据库的链接，这个API的常用方法：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DriverManager.registerDriver(new Driver())</span></span><br><span class="line"><span class="comment">// DriverManager.getConnection(url, user, password)</span></span><br><span class="line"></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>); <span class="comment">// 固定写法，加载驱动 </span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line"><span class="comment">// connection 代表数据库</span></span><br><span class="line">connection.createStatement();<span class="comment">// 创建向数据库发送sql的statement对象</span></span><br><span class="line">connection.prepareStatement(sql);<span class="comment">// 创建向数据库发送预编译sql的PrepareSatement对象</span></span><br><span class="line">connection.rollback();  <span class="comment">// 事务回滚</span></span><br><span class="line">connection.commit(); <span class="comment">// 事务提交</span></span><br><span class="line">connection.setAutoCommit(); <span class="comment">// 设置数据库自动提交</span></span><br></pre></td></tr></table></figure><p>注意：&#x3D;&#x3D;在实际开发中并不推荐采用registerDriver方法注册驱动&#x3D;&#x3D;。原因如下：</p><ol><li>查看Driver的源代码可以看到，如果采用此种方式，会导致驱动程序注册两次，也就是在内存中会 有两个Driver对象。</li><li>程序依赖mysql的api，脱离mysql的jar包，程序将无法编译，将来程序切换底层数据库将会非常麻 烦。</li></ol><p>推荐方式：<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></p><p>采用此种方式不会导致驱动对象在内存中重复出现，并且采用此种方式，程序仅仅只需要一个字符串， 不需要依赖具体的驱动，使程序的灵活性更高。</p><blockquote><p>URL说明</p></blockquote><ul><li>URL用于标识数据库的位置，通过URL地址告诉JDBC程序连接哪个数据库，URL地址的写法为：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcStudy?uesUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mysql 端口号 3306</span></span><br><span class="line"><span class="comment">// jdbc:mysql://localhost:3306/数据库名?参数1&amp;参数2&amp;参数3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// oracle 端口号 1521</span></span><br><span class="line"><span class="comment">// jdbc:oracle:thin:@localhost:1521:sid</span></span><br></pre></td></tr></table></figure><ul><li>常用数据库URL地址的写法：<ul><li>Oracle写法：jdbc:oracle:thin:@localhost:1521:sid</li><li>SqlServer写法：jdbc:microsoft:sqlserver:&#x2F;&#x2F;localhost:1433; DatabaseName&#x3D;sid</li><li>MySql写法：jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;sid</li></ul></li><li>如果连接的是本地的Mysql数据库，并且连接使用的端口是3306，那么的url地址可以简写为<ul><li><code>jdbc:mysql:///数据库</code></li></ul></li></ul><blockquote><p>Statement执行SQL的对象</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);  <span class="comment">// 返回结果集,结果集中封装了我们全部查询出来的对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Statement对象常用方法</span></span><br><span class="line">statement.executeQuery(sql); <span class="comment">// 查询操作，返回结果集</span></span><br><span class="line">statement.execute(sql); <span class="comment">// 执行任何SQL</span></span><br><span class="line">statement.executeUpdate(sql); <span class="comment">// 更新、插入、删除，均为这个。唯一受影响的是行数</span></span><br><span class="line">statement.addBatch(sql); <span class="comment">// 把多条sql语句放到一个批处理中</span></span><br><span class="line">statement.executeBatch(sql); <span class="comment">// 向数据库发送一批sql语句执行</span></span><br></pre></td></tr></table></figure><blockquote><p>ResultSet 查询的结果集：封装了所有的查询结果。</p></blockquote><ul><li>获取指定的数据类型</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">resultSet.getString(); <span class="comment">// 不知道数据类型时使用</span></span><br><span class="line"><span class="comment">// 如果知道列的类型就用指定的类型</span></span><br><span class="line">resultSet.getString();</span><br><span class="line">resultSet.getInt();</span><br><span class="line">resultSet.getFloat();</span><br><span class="line">resultSet.getDouble();</span><br><span class="line">resultSet.getDate();</span><br><span class="line">resultSet.getObject();</span><br><span class="line">....</span><br></pre></td></tr></table></figure><ul><li>ResultSet还提供了对结果集进行滚动的方法：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resultSet.next(); <span class="comment">// 移动到下一行</span></span><br><span class="line">resultSet.previous(); <span class="comment">// 移动到前一行</span></span><br><span class="line">resultSet.absolute(<span class="type">int</span> row); <span class="comment">// 移动到指定行</span></span><br><span class="line">resultSet.beforeFirst(); <span class="comment">// 移动resultSet的最前面。</span></span><br><span class="line">resultSet.afterLast(); <span class="comment">// 移动到resultSet的最后面。</span></span><br></pre></td></tr></table></figure><blockquote><p>释放资源</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 6.释放连接</span></span><br><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close(); <span class="comment">// 用完即关掉</span></span><br></pre></td></tr></table></figure><h3 id="5-statement对象"><a href="#5-statement对象" class="headerlink" title="5.statement对象"></a>5.statement对象</h3><p>&#x3D;&#x3D;JDBC中的statement对象用于向数据库发送SQL语句，想完成对数据库的增删改查，只需要通过这个对象 向数据库发送增删改查语句即可&#x3D;&#x3D;。</p><p>Statement对象的executeUpdate方法，用于向数据库发送增、删、改的sql语句，executeUpdate执行 完后，将会返回一个整数（即增删改语句导致了数据库几行数据发生了变化）。</p><p>Statement.executeQuery方法用于向数据库发送查询语句，executeQuery方法返回代表查询结果的 ResultSet对象。</p><blockquote><p>CRUD操作-create</p></blockquote><ul><li>使用executeUpdate(String sql)方法完成数据添加操作，示例操作：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(….) values(…..) &quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;插入成功！！！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>CRUD操作-delete</p></blockquote><ul><li>使用executeUpdate(String sql)方法完成数据删除操作，示例操作：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from user where id=1&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">	System.out.println(“删除成功！！！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>CRUD操作-update</p></blockquote><ul><li>使用executeUpdate(String sql)方法完成数据修改操作，示例操作：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set name=&#x27;&#x27; where name=&#x27;&#x27;&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">	System.out.println(“修改成功！！！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>CRUD操作-read</p></blockquote><ul><li>使用executeQuery(String sql)方法完成数据查询操作，示例操作：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where id=1&quot;</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">	<span class="comment">//根据获取列的数据类型，分别调用rs的相应方法映射到java对象中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>案例：使用jdbc对数据库增删改查</p></blockquote><ol><li>新建一个 lesson02 的包；</li><li>在src目录下创建一个db.properties文件，写入如下内容：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/jdbcStudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true</span><br><span class="line">username=root</span><br><span class="line">password=root</span><br></pre></td></tr></table></figure><ol start="3"><li>在lesson02 下新建一个 utils 包，新建一个类 <code>Utils</code>：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson02.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Utils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 读取db.properties文件中的数据库连接信息</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Utils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(in);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取数据库连接驱动</span></span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取数据库连接URL地址</span></span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取数据库连接用户名</span></span><br><span class="line">            username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取数据库连接密码</span></span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 加载数据库驱动，只需加载一次！</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取连接对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>执行增删改查数据</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 插入数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInsert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 获取一个数据库连接</span></span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 通过conn对象获取负责执行SQL命令的Statement对象</span></span><br><span class="line">            st = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 要执行的SQL</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行操作</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭资源</span></span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDelete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from users where id=4&quot;</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;删除数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUpdate</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update users set name=&#x27;王伟&#x27;,email=&#x27;wangwei@163.com&#x27; where id=3&quot;</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;更新数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSelect</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line"><span class="comment">//            String sql = &quot;select * from users&quot;;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where id=2&quot;</span>;</span><br><span class="line">            rs = st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;查询数据成功！！！&quot;</span>);</span><br><span class="line"><span class="comment">//                System.out.println(rs.getString(&quot;name&quot;));</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SQL注入</p><ul><li>&#x3D;&#x3D;通过巧妙的技巧来拼接字符串，造成SQL短路，从而获取数据库数据&#x3D;&#x3D;</li></ul></blockquote><ul><li>SQL存在漏洞，会被攻击。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SQL</span>注入 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        login(<span class="string">&quot;lisi&quot;</span>,<span class="string">&quot;123456&quot;</span>);    <span class="comment">// 正常登录 ==结果==&gt;结果输出</span></span><br><span class="line"><span class="comment">//        login(&quot;&#x27;or &#x27;1=1&quot;,&quot;123456&quot;);  // SQL注入 ==结果==&gt;输出数据库内容</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 登陆业务</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            <span class="comment">// select * from users where name=&#x27;&#x27;or &#x27;1-1&#x27; and password=&#x27;123456&#x27;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where name=&#x27;&quot;</span>+username</span><br><span class="line">                    +<span class="string">&quot;&#x27; and password=&#x27;&quot;</span>+password+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">            rs = st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;查询数据成功！！！&quot;</span>);</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-PreparedStatement对象"><a href="#6-PreparedStatement对象" class="headerlink" title="6.PreparedStatement对象"></a>6.PreparedStatement对象</h3><p>PreperedStatement是Statement的子类，它的实例对象可以通过调用 Connection.preparedStatement()方法获得，相对于Statement对象而言：&#x3D;&#x3D;PreperedStatement可以避 免SQL注入的问题&#x3D;&#x3D;。</p><p>&#x3D;&#x3D;Statement会使数据库频繁编译SQL，可能造成数据库缓冲区溢出&#x3D;&#x3D;。</p><p>PreparedStatement可对SQL进行预编译，从而提高数据库的执行效率。并且PreperedStatement对于 sql中的参数，允许使用占位符的形式进行替换，简化sql语句的编写。</p><blockquote><p>使用PreparedStatement对象完成对数据库的CRUD操作</p></blockquote><ul><li>插入数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInsert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into users(id,name,password,email,birthday) values (?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 为SQL参数赋值，索引是从1开始的</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">5</span>); <span class="comment">// id是int类型</span></span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;subei&quot;</span>); <span class="comment">// name是字符串类型</span></span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;123456&quot;</span>); <span class="comment">// password是字符串类型</span></span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;24635862@qq.com&quot;</span>); <span class="comment">// email是字符串类型</span></span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(System.currentTimeMillis())); <span class="comment">// birthday是date类型</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            * 这里有个小问题:</span></span><br><span class="line"><span class="comment">            *   在使用  new Date().getTime() 时，会报错：请使用System.currentTimeMillis()代替new Date().getTime()</span></span><br><span class="line"><span class="comment">            * 对于这个问题，百度一下：</span></span><br><span class="line"><span class="comment">            *   new Date()所做的事情其实就是调用了System.currentTimeMillis()。</span></span><br><span class="line"><span class="comment">            *   如果仅仅是需要或者毫秒数，那么完全可以使用System.currentTimeMillis()去代替new Date()，</span></span><br><span class="line"><span class="comment">            *   效率上会高一点。况且很多人喜欢在同一个方法里面多次使用new Date()，</span></span><br><span class="line"><span class="comment">            *   通常性能就是这样一点一点地消耗掉，这里其实可以声明一个引用。</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行插入数据操作</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// SQL释放资源</span></span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>删除数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDelete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete * from users where id=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;删除数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>更新数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUpdate</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update users set name=?,email=? where id=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>,<span class="string">&quot;叶凡&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;632579682@163.com&quot;</span>);</span><br><span class="line">            st.setInt(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;更新数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>查询数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSelect</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where id=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;查询数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>避免SQL注入</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SQL</span>注入 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        login(&quot;lisi&quot;,&quot;123456&quot;);    // 正常登录  ==结果==&gt;结果输出</span></span><br><span class="line">        login(<span class="string">&quot;&#x27;or &#x27;1=1&quot;</span>,<span class="string">&quot;123456&quot;</span>);  <span class="comment">// SQL注入  ==结果==&gt;无结果输出</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 登陆业务</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where name=? and password=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>,username);</span><br><span class="line">            st.setString(<span class="number">2</span>,password);</span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;查询数据成功！！！&quot;</span>);</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>原理：执行的时候参数会用引号包起来，并把参数中的引号作为转义字符，从而避免了参数也作为条件 的一部分。</li></ul><h3 id="7-使用IDEA连接数据库"><a href="#7-使用IDEA连接数据库" class="headerlink" title="7.使用IDEA连接数据库"></a>7.使用IDEA连接数据库</h3><ul><li>打开IDEA2020.2的如下图：</li></ul><p><img src="/../img/JDBC/image-20210717173157261.png" alt="image-20210717173157261"></p><ul><li>打开如下界面，开始进行相关设置：</li></ul><p><img src="/../img/JDBC/image-20210717173415898.png" alt="image-20210717173415898"></p><ul><li>连接成功后，进入下图操作：</li></ul><p><img src="/../img/JDBC/image-20210717173702779.png" alt="image-20210717173702779"></p><ul><li>然后打开如下图：</li></ul><p><img src="/../img/JDBC/image-20210717173926714.png" alt="image-20210717173926714"></p><ul><li>一定要点击那个绿色的箭头，否则更新失败，数据未保存！更新成功如下图：</li></ul><p><img src="/../img/JDBC/image-20210717174122914.png" alt="image-20210717174232819"></p><ul><li>编写数据库，编写后点击下图左上角绿色执行，具体如下图：</li></ul><p><img src="/../img/JDBC/image-20210717174949247.png" alt="image-20210717174949247"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 案例</span><br><span class="line">-- 创建账户表</span><br><span class="line">CREATE TABLE account(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    NAME VARCHAR(40),</span><br><span class="line">    money FLOAT</span><br><span class="line">);</span><br><span class="line">-- 插入测试数据</span><br><span class="line">insert into account(name,money) values(&#x27;A&#x27;,1000);</span><br><span class="line">insert into account(name,money) values(&#x27;B&#x27;,1000);</span><br><span class="line">insert into account(name,money) values(&#x27;C&#x27;,1000);</span><br></pre></td></tr></table></figure><ul><li><code>如果IDEA2020.2 连接失败MySQL数据库</code>，参考下图修改：</li></ul><p><img src="/../img/JDBC/image-20210717175800982.png" alt="image-20210717190926860"></p><h3 id="8-JDBC操作事务"><a href="#8-JDBC操作事务" class="headerlink" title="8.JDBC操作事务"></a>8.JDBC操作事务</h3><ul><li><p>事务：逻辑上的一组操作，组成这组操作的各个单元，&#x3D;&#x3D;要不全部成功，要不全部不成功&#x3D;&#x3D;。</p></li><li><p>ACID原则：</p><ul><li>原子性(Atomic)：要么全部完成，要么都不完成。</li><li>一致性(Consist)：总数不变。</li><li><strong>隔离性(Isolated)：多个进程互不干扰</strong>。</li><li>持久性(Durable)：一旦提交不可逆，持久化到数据库了。</li></ul></li><li><p>隔离导致的一些问题：</p><ul><li>脏读：一个事务读取了另外一个事务未提交的数据。</li><li>不可重复读：在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）。</li><li>虚读(幻读)：是指在一个事务内读取到了别的事务插入的数据，导致前后读取数量总量不一致。</li></ul></li><li><p>当Jdbc程序向数据库获得一个Connection对象时，默认情况下这个Connection对象会自动向数据库提交 在它上面发送的SQL语句。若想关闭这种默认提交方式，让多条SQL在一个事务中执行，可使用下列的 JDBC控制事务语句。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connection.setAutoCommit(<span class="literal">false</span>);<span class="comment">//开启事务(start transaction)</span></span><br><span class="line">Connection.rollback();<span class="comment">//回滚事务(rollback)</span></span><br><span class="line">Connection.commit();<span class="comment">//提交事务(commit)</span></span><br></pre></td></tr></table></figure><ul><li>模拟转账成功时的业务</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟转账成功时的业务场景</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransaction</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭数据库的自动提交，自动开启事务</span></span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="comment">// 开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money-100 where name=&#x27;A&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql1);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money+100 where name=&#x27;B&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql2);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 业务完毕，提交事务</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;转账成功！！！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback(); <span class="comment">// 失败，则事务回滚</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../img/JDBC/image-20210717191121282.png" alt="image-20210717191121282"></p><ul><li>模拟转账过程中出现异常，导致部分SQL执行失败后，让数据库<code>自动</code>回滚事务</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟转账失败时的业务场景</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransaction</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭数据库的自动提交，自动开启事务</span></span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="comment">// 开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money-100 where name=&#x27;A&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql1);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> x=<span class="number">1</span>/<span class="number">0</span>;  <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money+100 where name=&#x27;B&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql2);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 业务完毕，提交事务</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;转账成功！！！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>模拟转账过程中出现异常，导致部分SQL执行失败时，<code>手动</code>通知数据库回滚事务</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson02.utils.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟转账失败时的业务场景</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransaction</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭数据库的自动提交，自动开启事务</span></span><br><span class="line">            conn = Utils.getConnection();</span><br><span class="line">            <span class="comment">// 开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money-100 where name=&#x27;A&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql1);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> x=<span class="number">1</span>/<span class="number">0</span>;  <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money=money+100 where name=&#x27;B&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql2);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 业务完毕，提交事务</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;转账成功！！！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback(); <span class="comment">// 失败，则事务回滚</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Utils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-数据库连接池"><a href="#8-数据库连接池" class="headerlink" title="8.数据库连接池"></a>8.数据库连接池</h3><p>用户每次请求都需要向数据库获得链接，而数据库创建连接通常需要消耗相对较大的资源，创建时间也 较长。假设网站一天10万访问量，数据库服务器就需要创建10万次连接，极大的浪费数据库的资源，并且极易造成数据库服务器内存溢出、拓机。</p><blockquote><p>数据库连接池的基本概念</p></blockquote><p>数据库连接是一种关键的有限的昂贵的资源，这一点在多用户的网页应用程序中体现的尤为突出。对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性，影响到程序的性能指标。数据库连接池正式针对这个问题提出来的。<strong>数据库连接池负责分配,管理和释放数据库连接,它允许应用程序重复使用一个现有的 数据库连接,而不是重新建立一个</strong>。</p><p>数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中，这些数据库连接的数量是由最小数据库连接数来设定的。无论这些数据库连接是否被使用，连接池都将一直保证至少拥有这么多的连接数量。连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数，当应用程序向连接池请求的连接数 超过最大连接数量时，这些请求将被加入到等待队列中。</p><p>数据库连接池的最小连接数和最大连接数的设置要考虑到以下几个因素:</p><ol><li>最小连接数：是连接池一直保持的数据库连接，所以如果应用程序对数据库连接的使用量不大，将会有大量的数据库连接资源被浪费。</li><li>最大连接数：是连接池能申请的最大连接数，如果数据库连接请求超过次数，后面的数据库连接请求将被加入到等待队列中，这会影响以后的数据库操作。</li><li>如果最小连接数与最大连接数相差很大：那么最先连接请求将会获利，之后超过最小连接数量的连接请求等价于建立一个新的数据库连接。不过，这些大于最小连接数的数据库连接在使用完不会马上被释放，他将被放到连接池中等待重复使用或是空间超时后被释放。</li></ol><p>&#x3D;&#x3D;编写连接池，需实现java.sql.DataSource接口&#x3D;&#x3D;。</p><blockquote><p>开源数据源实现</p></blockquote><p>现在很多WEB服务器(Weblogic, WebSphere, Tomcat)都提供了DataSoruce的实现，即连接池的实现。 <strong>通常我们把DataSource的实现，按其英文含义称之为数据源，数据源中都包含了数据库连接池的实 现</strong>。</p><p>也有一些开源组织提供了数据源的独立实现：</p><ul><li>DBCP 数据库连接池</li><li>C3P0 数据库连接池</li><li>Druid 数据库连接池 —— 阿里巴巴</li></ul><p>在使用了数据库连接池之后，在项目的实际开发中就不需要编写连接数据库的代码了，直接从数据源获得数据库的连接。</p><blockquote><p>DBCP</p></blockquote><ul><li><p>要使用DBCP数据源，需要导入如下两个 jar 文件：</p><ul><li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/commons-dbcp/commons-dbcp/1.4">Commons-dbcp-1.4.jar</a></li><li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/commons-pool/commons-pool/1.6">Commons-pool-1.6.jar</a></li></ul><p><img src="/../img/JDBC/image-20210717194124101.png" alt="image-20210717194124101"></p></li><li><p>在src目录下加入dbcp的配置文件：dbcpconfig.properties</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#连接设置</span><br><span class="line">driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcStudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true</span></span><br><span class="line">username=root</span><br><span class="line">password=root</span><br><span class="line"></span><br><span class="line">#&lt;!-- 初始化连接 --&gt;</span><br><span class="line">initialSize=<span class="number">10</span></span><br><span class="line"></span><br><span class="line">#最大连接数量</span><br><span class="line">maxActive=<span class="number">50</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 最大空闲连接 --&gt;</span><br><span class="line">maxIdle=<span class="number">20</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 最小空闲连接 --&gt;</span><br><span class="line">minIdle=<span class="number">5</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 超时等待时间以毫秒为单位 <span class="number">6000</span>毫秒/<span class="number">1000</span>等于<span class="number">60</span>秒 --&gt;</span><br><span class="line">maxWait=<span class="number">60000</span></span><br><span class="line"></span><br><span class="line">#JDBC驱动建立连接时附带的连接属性属性的格式必须为这样：[属性名=property;]</span><br><span class="line">#注意：<span class="string">&quot;user&quot;</span> 与 <span class="string">&quot;password&quot;</span> 两个属性会被明确地传递，因此这里不需要包含他们。</span><br><span class="line">connectionProperties=useUnicode=<span class="literal">true</span>;characterEncoding=UTF8</span><br><span class="line"></span><br><span class="line">#指定由连接池所创建的连接的自动提交（auto-commit）状态。</span><br><span class="line">defaultAutoCommit=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">#driver <span class="keyword">default</span> 指定由连接池所创建的连接的只读（read-only）状态。</span><br><span class="line">#如果没有设置该值，则“setReadOnly”方法将不被调用。（某些驱动并不支持只读模式，如：Informix）</span><br><span class="line">defaultReadOnly=</span><br><span class="line"></span><br><span class="line">#driver <span class="keyword">default</span> 指定由连接池所创建的连接的事务级别（TransactionIsolation）。</span><br><span class="line">#可用值为下列之一：（详情可见javadoc。）NONE,READ_UNCOMMITTED, READ_COMMITTED,REPEATABLE_READ, SERIALIZABLE</span><br><span class="line">defaultTransactionIsolation=READ_UNCOMMITTED</span><br></pre></td></tr></table></figure><ul><li>编写工具类 Utils_DBCP</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson05.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库连接工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Utils_DBCP</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Utils_DBCP.class.getClassLoader().getResourceAsStream(<span class="string">&quot;dbcpconfig.properties&quot;</span>);</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">prpo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            prpo.load(in);</span><br><span class="line">            <span class="comment">// 创建数据源</span></span><br><span class="line">            ds = BasicDataSourceFactory.createDataSource(prpo);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ExceptionInInitializerError</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数据库连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>测试</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson05;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson05.utils.Utils_DBCP;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库连接工具类测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDbcp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = Utils_DBCP.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into users(id,name,password,email,birthday) values (?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">6</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;232323&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;327338203@qq.com&quot;</span>);</span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(System.currentTimeMillis()));</span><br><span class="line">            <span class="comment">// 执行插入数据操作</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// SQL释放资源</span></span><br><span class="line">            Utils_DBCP.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>C3P0</p></blockquote><ul><li><p>C3P0是一个开源的JDBC连接池，它实现了数据源和JNDI绑定，支持JDBC3规范和JDBC2的标准扩展。目前使用它的开源项目有Hibernate，Spring等。</p></li><li><p>c3p0与dbcp区别：</p><ul><li>dbcp没有自动回收空闲连接的功能；</li><li>c3p0有自动回收空闲连接功能。</li></ul></li><li><p>要使用C3P0数据源，需要导入如下两个 jar 文件：</p><ul><li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/com.mchange/c3p0/0.9.5.5">c3p0-0.9.5.5.jar</a></li><li><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/com.mchange/mchange-commons-java/0.2.19">mchange-commons-java-0.2.19.jar</a></li></ul></li><li><p>在src目录下加入C3P0的配置文件：c3p0-config.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    C3P0的缺省(默认)配置，</span></span><br><span class="line"><span class="comment">    如果在代码中“ComboPooledDataSource ds = new ComboPooledDataSource();”这样写</span></span><br><span class="line"><span class="comment">    就表示使用的是C3P0的缺省(默认)配置信息来创建数据源</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/jdbcStudy? useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8<span class="symbol">&amp;amp;</span>useSSL=true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireIncrement&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    C3P0的命名配置，</span></span><br><span class="line"><span class="comment">    如果在代码中“ComboPooledDataSource ds = new</span></span><br><span class="line"><span class="comment">    ComboPooledDataSource(&quot;MySQL&quot;);”这样写就表示使用的是name是MySQL的配置</span></span><br><span class="line"><span class="comment">    信息来创建数据源</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/jdbcStudy?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8<span class="symbol">&amp;amp;</span>useSSL=true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireIncrement&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>编写工具类 Utils_C3P0.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson05.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * C3P0工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Utils_C3P0</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ComboPooledDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 使用C3P0的默认配置来创建数据源</span></span><br><span class="line">            ds = <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line">            <span class="comment">// 使用C3P0的命名配置来创建数据源</span></span><br><span class="line"><span class="comment">//            ds = new ComboPooledDataSource(&quot;MySQL&quot;);</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ExceptionInInitializerError</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数据库连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>测试类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.lesson05;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lesson05.utils.Utils_C3P0;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * C3P0测试类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestC3P0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = Utils_C3P0.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into users(id,name,password,email,birthday) values (?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">7</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;pink&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;263223&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;3276128203@qq.com&quot;</span>);</span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(System.currentTimeMillis()));</span><br><span class="line">            <span class="comment">// 执行插入数据操作</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入数据成功！！！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// SQL释放资源</span></span><br><span class="line">            Utils_C3P0.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>无论使用什么数据源，本质都是一样的！！！</li></ul><h2 id="MySQL快速入门完结🎉🎉🎉🎉"><a href="#MySQL快速入门完结🎉🎉🎉🎉" class="headerlink" title="MySQL快速入门完结🎉🎉🎉🎉"></a>MySQL快速入门完结🎉🎉🎉🎉</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://liu-yunxuan.github.io">liuyunxuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://liu-yunxuan.github.io/2022/05/10/MySQL/">https://liu-yunxuan.github.io/2022/05/10/MySQL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://liu-yunxuan.github.io" target="_blank">尘埃落定博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="/../cover/mysql.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/10/SSM%E6%95%B4%E5%90%88/" title="SSM整合"><img class="cover" src="/../cover/spring.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SSM整合</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/10/Mybatis/" title="Mybatis"><img class="cover" src="/../cover/mybatis.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Mybatis</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/05/10/GUI/" title="GUI"><img class="cover" src="/../cover/GUI.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">GUI</div></div></a></div><div><a href="/2022/05/10/JVM/" title="JVM"><img class="cover" src="/../cover/JVM.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">JVM</div></div></a></div><div><a href="/2022/05/10/JavaScript%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" title="Java Script"><img class="cover" src="/../cover/js.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">Java Script</div></div></a></div><div><a href="/2022/05/10/IO%E6%B5%81/" title="IO流"><img class="cover" src="/../cover/io.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">IO流</div></div></a></div><div><a href="/2022/05/10/Java%20SE%E5%9F%BA%E7%A1%80/" title="Java SE"><img class="cover" src="/../cover/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">Java SE</div></div></a></div><div><a href="/2022/05/10/Java%E5%B8%B8%E7%94%A8%E7%B1%BB/" title="Java常用类"><img class="cover" src="/../cover/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="title">Java常用类</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Giscus</span><span id="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">liuyunxuan</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liu-yunxuan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/liu-yunxuan" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:yunxuanliu84@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">博客出现问题及时通过邮箱联系</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL"><span class="toc-text">MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9D%E8%AF%86MySQL"><span class="toc-text">1.初识MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0MySQL"><span class="toc-text">1.为什么要学习MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.什么是数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB"><span class="toc-text">3.数据库分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-MySQL%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="toc-text">4.MySQL简介与安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-SQLyog%E5%AE%89%E8%A3%85"><span class="toc-text">5.SQLyog安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">6.连接数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">2.数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">1.操作数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%80%BC%E5%92%8C%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.数据值和列类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7"><span class="toc-text">3.数据字段属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-text">4.创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.数据表的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">6.修改数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-MySQL%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"><span class="toc-text">3.MySQL数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A4%96%E9%94%AE"><span class="toc-text">1.外键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-DML%E8%AF%AD%E8%A8%80"><span class="toc-text">2.DML语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">3.添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-text">4.修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">5.删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-DQL%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">4.DQL查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DQL%E8%AF%AD%E8%A8%80"><span class="toc-text">1.DQL语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%87%E5%AE%9A%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="toc-text">2.指定查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-where%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-text">3.where条件语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">4.联表查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%86%E9%A1%B5%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="toc-text">5.分页和排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">6.子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%88%86%E7%BB%84%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">7.分组和过滤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-MySQL%E5%87%BD%E6%95%B0"><span class="toc-text">5.MySQL函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">1.常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">2.聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E7%9A%84MD5-%E5%8A%A0%E5%AF%86"><span class="toc-text">3.数据库级别的MD5 加密</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BA%8B%E5%8A%A1"><span class="toc-text">6.事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-text">1.什么是事务?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1"><span class="toc-text">2.执行事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%B4%A2%E5%BC%95"><span class="toc-text">7.索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-text">1.概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">2.索引的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95%E7%B4%A2%E5%BC%95"><span class="toc-text">3.测试索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E5%8E%9F%E5%88%99"><span class="toc-text">4.索引原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%8F%8A%E5%A4%87%E4%BB%BD"><span class="toc-text">8.权限管理及备份</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">1.用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MySQL%E5%A4%87%E4%BB%BD"><span class="toc-text">2.MySQL备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%A7%84%E8%8C%83%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-text">9.规范化数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.为什么需要数据库设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-text">2.三大范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-JDBC"><span class="toc-text">10.JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8"><span class="toc-text">1.数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JDBC%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.JDBC介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AC%AC%E4%B8%80%E4%B8%AAJDBC%E7%A8%8B%E5%BA%8F"><span class="toc-text">3.第一个JDBC程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E"><span class="toc-text">4.对象说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-statement%E5%AF%B9%E8%B1%A1"><span class="toc-text">5.statement对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-PreparedStatement%E5%AF%B9%E8%B1%A1"><span class="toc-text">6.PreparedStatement对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BD%BF%E7%94%A8IDEA%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">7.使用IDEA连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-JDBC%E6%93%8D%E4%BD%9C%E4%BA%8B%E5%8A%A1"><span class="toc-text">8.JDBC操作事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">8.数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E5%AE%8C%E7%BB%93%F0%9F%8E%89%F0%9F%8E%89%F0%9F%8E%89%F0%9F%8E%89"><span class="toc-text">MySQL快速入门完结🎉🎉🎉🎉</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/Docker/" title="Docker"><img src="/../cover/docker.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Docker"></a><div class="content"><a class="title" href="/2022/05/10/Docker/" title="Docker">Docker</a><time datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/CSS3%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" title="CSS"><img src="/../cover/css.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSS"></a><div class="content"><a class="title" href="/2022/05/10/CSS3%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" title="CSS">CSS</a><time datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/IDEA%E5%AE%89%E8%A3%85/" title="IDEA安装"><img src="/../cover/idea.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="IDEA安装"></a><div class="content"><a class="title" href="/2022/05/10/IDEA%E5%AE%89%E8%A3%85/" title="IDEA安装">IDEA安装</a><time datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/Git/" title="Git"><img src="/../cover/git.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Git"></a><div class="content"><a class="title" href="/2022/05/10/Git/" title="Git">Git</a><time datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/HTML5%E5%85%A5%E9%97%A8/" title="HTML"><img src="/../cover/html.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="HTML"></a><div class="content"><a class="title" href="/2022/05/10/HTML5%E5%85%A5%E9%97%A8/" title="HTML">HTML</a><time datetime="2022-05-10T02:00:00.000Z" title="发表于 2022-05-10 10:00:00">2022-05-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By liuyunxuan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><span id="runtime"></span><br><a href="https://beian.mps.gov.cn/#/query/webSearch?code=61092802000133" rel="noreferrer" target="_blank"><img class="icp-icon" src="/images/beian.png"><span>陕公网安备61092802000133</span></a> | <a href="https://beian.miit.gov.cn" target="_blank"><span>陕ICP备2023020115号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><div class="js-pjax"><script>(()=>{const t=t=>"dark"===t?"dark":"light",e=()=>{const e=Object.assign({src:"https://giscus.app/client.js","data-repo":"liu-yunxuan/liu-yunxuan.github.io","data-repo-id":"R_kgDOMlkdqA","data-category-id":"DIC_kwDOMlkdqM4Chz4A","data-mapping":"pathname","data-theme":t(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},null),a=document.createElement("script");for(let t in e)a.setAttribute(t,e[t]);document.getElementById("giscus-wrap").appendChild(a)};btf.addGlobalFn("themeChange",(e=>{(t=>{const e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:t},"https://giscus.app")})({setConfig:{theme:t(e)}})}),"giscus"),btf.loadComment(document.getElementById("giscus-wrap"),e)})()</script><script>(()=>{const t=()=>{new Gitalk(Object.assign({clientID:"Ov23lilSUKfrZVWOnEoS",clientSecret:"dac17a37e9c24359548a6a2829bea8d369f0d8ac",repo:"liuyunxuan.asia",owner:"liu-yunxuan",admin:["liu-yunxuan"],id:"e9c88963a6548b150457259ae1defd94",updateCountCallback:a},null)).render("gitalk-container")},n=async()=>{"function"==typeof Gitalk||(await getCSS("https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css"),await getScript("https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js")),t()},a=t=>{const n=document.querySelector("#post-meta .gitalk-comment-count");n&&(n.textContent=t)};window.loadOtherComment=n})()</script></div><script src="/js/lyx.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>